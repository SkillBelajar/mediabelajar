/*!
 * JavaScript for PHPMaker v2021.0.0
 * Copyright 2002-2020 e.World Technology Limited
 */
!function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e,t,a){return e(a={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&a.path)}},a.exports),a.exports}var n=function(e){return e&&e.Math==Math&&e},i=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),r=function(e){try{return!!e()}catch(e){return!0}},o=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,d={f:l&&!s.call({1:2},1)?function(e){var t=l(this,e);return!!t&&t.enumerable}:s},c=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},u={}.toString,p=function(e){return u.call(e).slice(8,-1)},f="".split,h=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==p(e)?f.call(e,""):Object(e)}:Object,g=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},m=function(e){return h(g(e))},w=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=function(e,t){if(!w(e))return e;var a,n;if(t&&"function"==typeof(a=e.toString)&&!w(n=a.call(e)))return n;if("function"==typeof(a=e.valueOf)&&!w(n=a.call(e)))return n;if(!t&&"function"==typeof(a=e.toString)&&!w(n=a.call(e)))return n;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,y=function(e,t){return b.call(e,t)},E=i.document,_=w(E)&&w(E.createElement),S=function(e){return _?E.createElement(e):{}},x=!o&&!r((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),T=Object.getOwnPropertyDescriptor,O={f:o?T:function(e,t){if(e=m(e),t=v(t,!0),x)try{return T(e,t)}catch(e){}if(y(e,t))return c(!d.f.call(e,t),e[t])}},A=function(e){if(!w(e))throw TypeError(String(e)+" is not an object");return e},I=Object.defineProperty,P={f:o?I:function(e,t,a){if(A(e),t=v(t,!0),A(a),x)try{return I(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(e[t]=a.value),e}},C=o?function(e,t,a){return P.f(e,t,c(1,a))}:function(e,t,a){return e[t]=a,e},k=function(e,t){try{C(i,e,t)}catch(a){i[e]=t}return t},R=i["__core-js_shared__"]||k("__core-js_shared__",{}),N=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(e){return N.call(e)});var M,D,L,j=R.inspectSource,F=i.WeakMap,$="function"==typeof F&&/native code/.test(j(F)),U=a((function(e){(e.exports=function(e,t){return R[e]||(R[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),H=0,Y=Math.random(),B=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++H+Y).toString(36)},K=U("keys"),z=function(e){return K[e]||(K[e]=B(e))},G={},W=i.WeakMap;if($){var V=new W,q=V.get,X=V.has,J=V.set;M=function(e,t){return J.call(V,e,t),t},D=function(e){return q.call(V,e)||{}},L=function(e){return X.call(V,e)}}else{var Q=z("state");G[Q]=!0,M=function(e,t){return C(e,Q,t),t},D=function(e){return y(e,Q)?e[Q]:{}},L=function(e){return y(e,Q)}}var Z,ee={set:M,get:D,has:L,enforce:function(e){return L(e)?D(e):M(e,{})},getterFor:function(e){return function(t){var a;if(!w(t)||(a=D(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return a}}},te=a((function(e){var t=ee.get,a=ee.enforce,n=String(String).split("String");(e.exports=function(e,t,r,o){var s=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,d=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof t||y(r,"name")||C(r,"name",t),a(r).source=n.join("string"==typeof t?t:"")),e!==i?(s?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=r:C(e,t,r)):l?e[t]=r:k(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||j(this)}))})),ae=i,ne=function(e){return"function"==typeof e?e:void 0},ie=function(e,t){return arguments.length<2?ne(ae[e])||ne(i[e]):ae[e]&&ae[e][t]||i[e]&&i[e][t]},re=Math.ceil,oe=Math.floor,se=function(e){return isNaN(e=+e)?0:(e>0?oe:re)(e)},le=Math.min,de=function(e){return e>0?le(se(e),9007199254740991):0},ce=Math.max,ue=Math.min,pe=function(e){return function(t,a,n){var i,r=m(t),o=de(r.length),s=function(e,t){var a=se(e);return a<0?ce(a+t,0):ue(a,t)}(n,o);if(e&&a!=a){for(;o>s;)if((i=r[s++])!=i)return!0}else for(;o>s;s++)if((e||s in r)&&r[s]===a)return e||s||0;return!e&&-1}},fe={includes:pe(!0),indexOf:pe(!1)},he=fe.indexOf,ge=function(e,t){var a,n=m(e),i=0,r=[];for(a in n)!y(G,a)&&y(n,a)&&r.push(a);for(;t.length>i;)y(n,a=t[i++])&&(~he(r,a)||r.push(a));return r},me=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],we=me.concat("length","prototype"),ve={f:Object.getOwnPropertyNames||function(e){return ge(e,we)}},be={f:Object.getOwnPropertySymbols},ye=ie("Reflect","ownKeys")||function(e){var t=ve.f(A(e)),a=be.f;return a?t.concat(a(e)):t},Ee=function(e,t){for(var a=ye(t),n=P.f,i=O.f,r=0;r<a.length;r++){var o=a[r];y(e,o)||n(e,o,i(t,o))}},_e=/#|\.prototype\./,Se=function(e,t){var a=Te[xe(e)];return a==Ae||a!=Oe&&("function"==typeof t?r(t):!!t)},xe=Se.normalize=function(e){return String(e).replace(_e,".").toLowerCase()},Te=Se.data={},Oe=Se.NATIVE="N",Ae=Se.POLYFILL="P",Ie=Se,Pe=O.f,Ce=function(e,t){var a,n,r,o,s,l=e.target,d=e.global,c=e.stat;if(a=d?i:c?i[l]||k(l,{}):(i[l]||{}).prototype)for(n in t){if(o=t[n],r=e.noTargetGet?(s=Pe(a,n))&&s.value:a[n],!Ie(d?n:l+(c?".":"#")+n,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;Ee(o,r)}(e.sham||r&&r.sham)&&C(o,"sham",!0),te(a,n,o,e)}},ke=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())})),Re=ke&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ne=U("wks"),Me=i.Symbol,De=Re?Me:Me&&Me.withoutSetter||B,Le=function(e){return y(Ne,e)||(ke&&y(Me,e)?Ne[e]=Me[e]:Ne[e]=De("Symbol."+e)),Ne[e]},je=Object.keys||function(e){return ge(e,me)},Fe=o?Object.defineProperties:function(e,t){A(e);for(var a,n=je(t),i=n.length,r=0;i>r;)P.f(e,a=n[r++],t[a]);return e},$e=ie("document","documentElement"),Ue=z("IE_PROTO"),He=function(){},Ye=function(e){return"<script>"+e+"<\/script>"},Be=function(){try{Z=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Be=Z?function(e){e.write(Ye("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Z):((t=S("iframe")).style.display="none",$e.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ye("document.F=Object")),e.close(),e.F);for(var a=me.length;a--;)delete Be.prototype[me[a]];return Be()};G[Ue]=!0;var Ke=Object.create||function(e,t){var a;return null!==e?(He.prototype=A(e),a=new He,He.prototype=null,a[Ue]=e):a=Be(),void 0===t?a:Fe(a,t)},ze=Le("unscopables"),Ge=Array.prototype;null==Ge[ze]&&P.f(Ge,ze,{configurable:!0,value:Ke(null)});var We,Ve=Object.defineProperty,qe={},Xe=function(e){throw e},Je=fe.includes;Ce({target:"Array",proto:!0,forced:!function(e,t){if(y(qe,e))return qe[e];t||(t={});var a=[][e],n=!!y(t,"ACCESSORS")&&t.ACCESSORS,i=y(t,0)?t[0]:Xe,s=y(t,1)?t[1]:void 0;return qe[e]=!!a&&!r((function(){if(n&&!o)return!0;var e={length:-1};n?Ve(e,1,{enumerable:!0,get:Xe}):e[1]=1,a.call(e,i,s)}))}("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return Je(this,e,arguments.length>1?arguments[1]:void 0)}}),We="includes",Ge[ze][We]=!0;var Qe=function(e){return Object(g(e))},Ze=Object.assign,et=Object.defineProperty,tt=!Ze||r((function(){if(o&&1!==Ze({b:1},Ze(et({},"a",{enumerable:!0,get:function(){et(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},a=Symbol();return e[a]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Ze({},e)[a]||"abcdefghijklmnopqrst"!=je(Ze({},t)).join("")}))?function(e,t){for(var a=Qe(e),n=arguments.length,i=1,r=be.f,s=d.f;n>i;)for(var l,c=h(arguments[i++]),u=r?je(c).concat(r(c)):je(c),p=u.length,f=0;p>f;)l=u[f++],o&&!s.call(c,l)||(a[l]=c[l]);return a}:Ze;Ce({target:"Object",stat:!0,forced:Object.assign!==tt},{assign:tt});var at,nt=Le("match"),it=function(e){if(function(e){var t;return w(e)&&(void 0!==(t=e[nt])?!!t:"RegExp"==p(e))}(e))throw TypeError("The method doesn't accept regular expressions");return e},rt=Le("match"),ot=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[rt]=!1,"/./"[e](t)}catch(e){}}return!1},st=O.f,lt="".endsWith,dt=Math.min,ct=ot("endsWith");Ce({target:"String",proto:!0,forced:!!(ct||(at=st(String.prototype,"endsWith"),!at||at.writable))&&!ct},{endsWith:function(e){var t=String(g(this));it(e);var a=arguments.length>1?arguments[1]:void 0,n=de(t.length),i=void 0===a?n:dt(de(a),n),r=String(e);return lt?lt.call(t,r,i):t.slice(i-r.length,i)===r}}),Ce({target:"String",proto:!0,forced:!ot("includes")},{includes:function(e){return!!~String(g(this)).indexOf(it(e),arguments.length>1?arguments[1]:void 0)}});var ut=O.f,pt="".startsWith,ft=Math.min,ht=ot("startsWith");function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function mt(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return gt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?gt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(a=e[Symbol.iterator]()).next.bind(a)}if(Ce({target:"String",proto:!0,forced:!(!ht&&!!function(){var e=ut(String.prototype,"startsWith");return e&&!e.writable}())&&!ht},{startsWith:function(e){var t=String(g(this));it(e);var a=de(ft(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return pt?pt.call(t,n,a):t.slice(a,a+n.length)===n}}),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var wt=function(e){var t=e[0],a=e[1];return t instanceof Blob&&(t=new File([t],a,{type:t.type,lastModified:t.lastModified})),t},vt=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},bt=function(e,t,a){return t instanceof Blob?[String(e),t,void 0!==a?a+"":"string"==typeof t.name?t.name:"blob"]:[String(e),String(t)]},yt=function(e,t){for(var a=0;a<e.length;a++)t(e[a])},Et="object"==typeof window?window:"object"==typeof self?self:t,_t=Et.FormData,St=Et.XMLHttpRequest&&Et.XMLHttpRequest.prototype.send,xt=Et.Request&&Et.fetch,Tt=Et.navigator&&Et.navigator.sendBeacon,Ot=Et.Symbol&&Symbol.toStringTag;Ot&&(Blob.prototype[Ot]||(Blob.prototype[Ot]="Blob"),"File"in Et&&!File.prototype[Ot]&&(File.prototype[Ot]="File"));try{new File([],"")}catch(e){Et.File=function(e,t,a){var n=new Blob(e,a),i=a&&void 0!==a.lastModified?new Date(a.lastModified):new Date;return Object.defineProperties(n,{name:{value:t},lastModifiedDate:{value:i},lastModified:{value:+i},toString:{value:function(){return"[object File]"}}}),Ot&&Object.defineProperty(n,Ot,{value:"File"}),n}}var At=function(){function e(e){if(this._data=Object.create(null),!e)return this;var t=this;yt(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type)if("file"===e.type){var a=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];yt(a,(function(a){t.append(e.name,a)}))}else if("select-multiple"===e.type||"select-one"===e.type)yt(e.options,(function(a){!a.disabled&&a.selected&&t.append(e.name,a.value)}));else if("checkbox"===e.type||"radio"===e.type)e.checked&&t.append(e.name,e.value);else{var n="textarea"===e.type?function(e){return e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")}(e.value):e.value;t.append(e.name,n)}}))}var t=e.prototype;return t.append=function(e,t,a){vt(arguments,2);var n=bt.apply(null,arguments);e=n[0],t=n[1],a=n[2];var i=this._data;i[e]||(i[e]=[]),i[e].push([t,a])},t.delete=function(e){vt(arguments,1),delete this._data[String(e)]},t.entries=regeneratorRuntime.mark((function e(){var t,a,n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._data,e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=13;break}a=e.t1.value,n=mt(t[a]);case 5:if((i=n()).done){e.next=11;break}return r=i.value,e.next=9,[a,wt(r)];case 9:e.next=5;break;case 11:e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})),t.forEach=function(e,t){vt(arguments,1);for(var a,n=mt(this);!(a=n()).done;){var i=a.value,r=i[0],o=i[1];e.call(t,o,r,this)}},t.get=function(e){vt(arguments,1);var t=this._data;return t[e=String(e)]?wt(t[e][0]):null},t.getAll=function(e){return vt(arguments,1),(this._data[String(e)]||[]).map(wt)},t.has=function(e){return vt(arguments,1),String(e)in this._data},t.keys=regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=mt(this);case 1:if((a=t()).done){e.next=7;break}return n=a.value,i=n[0],e.next=5,i;case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})),t.set=function(e,t,a){vt(arguments,2);var n=bt.apply(null,arguments);this._data[n[0]]=[[n[1],n[2]]]},t.values=regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=mt(this);case 1:if((a=t()).done){e.next=7;break}return n=a.value,i=n[1],e.next=5,i;case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})),t._asNative=function(){for(var e,t=new _t,a=mt(this);!(e=a()).done;){var n=e.value,i=n[0],r=n[1];t.append(i,r)}return t},t._blob=function(){for(var e,t="----formdata-polyfill-"+Math.random(),a=[],n=mt(this);!(e=n()).done;){var i=e.value,r=i[0],o=i[1];a.push("--"+t+"\r\n"),o instanceof Blob?a.push('Content-Disposition: form-data; name="'+r+'"; filename="'+o.name+'"\r\n',"Content-Type: "+(o.type||"application/octet-stream")+"\r\n\r\n",o,"\r\n"):a.push('Content-Disposition: form-data; name="'+r+'"\r\n\r\n'+o+"\r\n")}return a.push("--"+t+"--"),new Blob(a,{type:"multipart/form-data; boundary="+t})},t[Symbol.iterator]=function(){return this.entries()},t.toString=function(){return"[object FormData]"},e}();if(Ot&&(At.prototype[Ot]="FormData"),St){var It=Et.XMLHttpRequest.prototype.setRequestHeader;Et.XMLHttpRequest.prototype.setRequestHeader=function(e,t){It.call(this,e,t),"content-type"===e.toLowerCase()&&(this._hasContentType=!0)},Et.XMLHttpRequest.prototype.send=function(e){if(e instanceof At){var t=e._blob();this._hasContentType||this.setRequestHeader("Content-Type",t.type),St.call(this,t)}else St.call(this,e)}}if(xt){var Pt=Et.fetch;Et.fetch=function(e,t){return t&&t.body&&t.body instanceof At&&(t.body=t.body._blob()),Pt.call(this,e,t)}}Tt&&(Et.navigator.sendBeacon=function(e,t){return t instanceof At&&(t=t._asNative()),Tt.call(this,e,t)}),Et.FormData=At}function Ct(t){var a,n,i=this,r=t.id,o=t.form,s=t.forceSelect,l=/^[xy](\d*|\$rowindex\$)_/,d=r.match(l),c=r.replace(l,"x_"),u=d?d[1]:"",p={typeahead:{}};if("$rowindex$"==u)return p;var f=o.getElement(),h=o.getElement("sv_"+r);if(!h)return p;o.getElement("sc_"+r);for(var g,m=o.lists[c].parentFields.slice(),w=0,v=m.length;w<v;w++){1==m[w].split(" ").length&&(m[w]=m[w].replace(/^x_/,"x"+u+"_"))}this.data=t.data,this.minWidth=t.minWidth,this.maxHeight=t.maxHeight,this.highlight=t.highlight,this.hint=t.hint,this.minLength=t.minLength,this.limit=t.limit,this.templates=Object.assign({},t.templates),this.trigger=t.trigger,this.delay=t.delay,this.display=t.display||"value",this.input=h,this.element=o.getElement(r),this.$input=a=e(this.input),this.$element=n=e(this.element),this._options=[],this._recordCount=0,a.val()&&n.val()&&this._options.push({val:n.val(),lbl:a.val()}),this.formatResult=function(e){return ew.displayValue(e,this.element)||e[0]},this.setValue=function(t){t=t||a.val();var i=a.data("results")?e.map(a.data("results"),(function(e,a){if(e.value==t)return a})):[];if(0==i.length){if(this._options&&this._options.length&&this._options[this._options.length-1].lbl==t)return;if(s&&t)return a.typeahead("val","").attr("placeholder",ew.language.phrase("ValueNotExist")).addClass("is-invalid"),void n.val("").change()}else if(!/s(ea)?rch$/.test(f.id)||s){var r=i[0];r>-1&&(t=a.data("results")[r].lf)}t!==n.val()&&n.val(t).change()},this.generateRequest=function(){var e=Object.assign({},this.data,{name:this.element.name,ajax:"autosuggest",language:ew.LANGUAGE_ID},ew.getUserParams("#p_"+r,f));if(m.length>0)for(var t=0,a=m.length;t<a;t++){var n=getOptionValues(m[t],f);e["v"+(t+1)]=n.join(ew.MULTIPLE_OPTION_SEPARATOR)}return e},this.prepare=function(t,a){var n={};n.data=this.generateRequest(),n.type="POST",n.dataType="json";var i=new URLSearchParams({q:t,n:this.limit,rnd:ew.random()});return e.isNumber(a)&&i.set("start",a),n.url=ew.getApiUrl(ew.API_LOOKUP_ACTION,i.toString()),n},this.transform=function(t){var n;return t&&"OK"==t.result&&(i._recordCount=t.totalRecordCount,n=t.records),a.data("results",n||[]),e.map(a.data("results"),(function(e){var t=e.value=i.formatResult(e);return{lf:e[0],df1:e[1],df2:e[2],df3:e[3],df4:e[4],value:t}}))},this.source=function(t,a,n){i._recordCount=0;var r=i.prepare(t);e.ajax(r).done((function(e){n(i.transform(e))}))},this.count=function(){return i.typeahead.menu.$node.find(".tt-suggestion.tt-selectable").length},this.more=function(){$body=e("body"),$body.css("cursor","wait");var t=i.typeahead,a=t.menu.query,n=t.menu.datasets[0],r=i.count(),o=i.prepare(a,r);e.ajax(o).done((function(e){e=i.transform(e),n._append(a,e),t.menu.$node.find(".tt-dataset").scrollTop(n.$lastSuggestion.outerHeight()*r)})).always((function(){$body.css("cursor","default")}))},a.on("typeahead:select",(function(e,t){i.setValue(t.value)})).change((function(e){var t=a.data("tt-typeahead");if(t&&t.isOpen()&&!t.menu.empty()){var n=t.menu.getActiveSelectable();if(n){var r=n.index(),o=a.data("results")[r][1];a.typeahead("val",o)}}i.setValue()})).blur((function(e){var t=a.data("tt-typeahead");t&&t.isOpen()&&t.menu.close()})).focus((function(e){a.attr("placeholder",a.data("placeholder")).removeClass("is-invalid")})),(g=o.lists[c].template?o.lists[c].template:i.templates.suggestion)&&e.isString(g)&&(g=e.templates(g)),g&&(i.templates.suggestion=g.render.bind(g)),n.data("autosuggest",this),e((function(){var e={highlight:i.highlight,minLength:i.minLength,hint:i.hint,trigger:i.trigger,delay:i.delay},t={name:o.id+"-"+r,source:i.source,templates:i.templates,display:i.display,limit:i.limit,async:!0},s=[e,t];n.trigger("typeahead",[s]),i.limit=t.limit,a.typeahead.apply(a,s),a.on("typeahead:rendered",(function(){var t,a=i.typeahead.menu.$node,n=a.find(".tt-more").html(ew.language.phrase("More"));arguments.length>1&&i._recordCount>i.count()?n.one(e.trigger,(function(a){t&&t.cancel(),setTimeout((function(){i.more()}),e.delay),a.preventDefault(),a.stopPropagation()})):n.hide()})),a.off("blur.tt"),i.typeahead=a.data("tt-typeahead");var l=i.typeahead.menu.$node.css("z-index",1e3);i.minWidth&&l.css("min-width",i.minWidth);var d=l.find(".tt-dataset"),c=i.maxHeight||(parseInt(d.css("line-height"),10)+6)*(t.limit+1);d.css({"max-height":c,"overflow-y":"auto"})}))}function kt(t,a){var n=this;this.id=t,this.pageId=a,this.$element=null,this._form=null,this.initSearchPanel=!1,this.modified=!1,this.validateRequired=!0,this.validate=null,this.emptyRow=null,this.multiPage=null,this.autoSuggests={},this.disableForm=function(){var t=this.getForm();e(t).find(":submit:not(.dropdown-toggle)").prop("disabled",!0).addClass("disabled")},this.enableForm=function(){var t=this.getForm();e(t).find(":submit:not(.dropdown-toggle)").prop("disabled",!1).removeClass("disabled")},this.appendHidden=function(t){var a=this.getForm(),n=e(a),i=e(t).closest(".ew-form"),r=i.attr("id")+"$"+t.name;if(!n.find("input:hidden[name='"+r+"']")[0]){var o=i.find('[name="'+t.name+'"]').serializeArray();o.length?o.forEach((function(t,a){e('<input type="hidden" name="'+r+'">').val(t.value).appendTo(n)})):e('<input type="hidden" name="'+r+'">').val("").appendTo(n)}},this.canSubmit=function(){var t=this.getForm(),a=e(t);if(this.disableForm(),this.updateTextArea(),!this.validate||this.validate()&&!a.find(".is-invalid")[0]){a.find("input[name^=sv_], input[name^=p_], .ew-template input").prop("disabled",!0),a.find("[data-readonly=1][disabled]").prop("disabled",!1);var i=e(a.find("input[name='detailpage']").map((function(e,t){return a.find("#"+t.value).get()})));return i.length>1&&i.each((function(t,a){e(a).find(":input").each((function(e,t){if(/^(fn_)?(x|o)\d*_/.test(t.name)){var r=i.not(a).find(":input[name='"+t.name+"']");r.length&&(n.appendHidden(t),r.each((function(){n.appendHidden(this)})))}}))})),!0}return this.enableForm(),!1},this.submit=function(e){var t=this.getForm();return this.canSubmit()&&(e&&(t.action=e),t.submit()),!1},this.lists=function(e){return e=e.replace(/^[xy](\d*|\$rowindex\$)_/,"x_"),this.lists[e]},this.compileTemplates=function(){for(var t in this.lists){var a=this.lists[t];a.template&&e.isString(a.template)&&(a.template=e.templates(a.template))}},this.getForm=function(){return this._form||(this.$element=e("#"+this.id),this.$element.is("form")?this._form=this.$element[0]:this.$element.is("div")&&(this._form=this.$element.closest("form")[0])),this._form},this.getElement=function(t){return this.$element||(this.$element=e("#"+this.id)),t?ew.getElement(t,this.$element):this.$element[0]},this.getElements=function(t){this.$element||(this.$element=e("#"+this.id));var a="[name='"+t+"']";a="input"+a+",select"+a+",textarea"+a+",button"+a;var n=this.$element.find(a);return 0==n.length?null:1==n.length&&n.is(":not([type=checkbox]):not([type=radio])")?n[0]:n.get()},this.updateLists=function(t){if(null!==t){var a=this.getForm(),i=!e.isUndefined(t),r=a.querySelector("input#confirm");if(r&&"confirm"==r.value)removeSpinner();else{var o=function(e){return i?e.replace(/^x_/,"x"+t+"_"):e},s=Object.keys(this.lists).map((function(e){return"[name='"+o(e)+"']"})).join();if(s&&a.querySelector(s)){var l=[],d=[];for(var c in this.compileTemplates(),this.lists){var u=this.lists[c].parentFields.slice(),p=this.lists[c].ajax;if(i){c=o(c);for(var f=0,h=u.length;f<h;f++)u[f]=o(u[f])}if(e.isBoolean(p)){var g=u.map((function(e){return getOptionValues(e,a)}));l.push([c,g,p,!1])}else updateOptions.call(this,c,u,null,!1)}for(f=0;f<l.length;f++)d.push(new Promise((function(e,t){setTimeout((function(){e(updateOptions.apply(n,l.shift()))}),ew.AJAX_DELAY*f)})));Promise.all(d).then((function(){e(document).trigger("updatedone",[{source:n,target:a}])})).catch((function(e){console.log(e)}))}else removeSpinner()}}},this.createAutoSuggest=function(e){var t=e.id;e.form=this;var a=Object.assign({},ew.autoSuggestSettings,{limit:ew.AUTO_SUGGEST_MAX_ENTRIES},e),i=t.replace(/^[xy](\d*|\$rowindex\$)_/,"x_"),r=Object.assign({},n.lists[i],{options:null,template:null});n.autoSuggests[t]instanceof Ct||(a.data=r),n.autoSuggests[t]=new Ct(a)},this.initEditors=function(){var t=this.getForm();e(t.elements).filter("textarea.editor").each((function(t,a){var n=e(a).data("editor");!n||n.active||n.name.includes("$rowindex$")||n.create()}))},this.updateTextArea=function(t){var a=this.getForm();e(a.elements).filter("textarea.editor").each((function(a,n){var i=e(n).data("editor");return!(i&&(!t||i.name==t))||(i.save(),!t&&void 0)}))},this.destroyEditor=function(t){var a=this.getForm();e(a.elements).filter("textarea.editor").each((function(a,n){var i=e(n).data("editor");return!(i&&(!t||i.name==t))||(i.destroy(),!t&&void 0)}))},this.onError=function(e,t){return onError(this,e,t)},this.initUpload=function(){var t=this.getForm();e(t.elements).filter("input:file:not([name*='$rowindex$'],[id='importfiles'])").each((function(t){e.later(ew.AJAX_DELAY*t,null,upload,this)}))},this.setupFilters=function(t,a){var i=this.id,r=this.filterList?this.filterList.data:null,o=e(".ew-save-filter[data-form="+i+"]").toggleClass("disabled",!r),s=e(".ew-delete-filter[data-form="+i+"]").toggleClass("disabled",!a.length).toggleClass("dropdown-toggle",!!a.length),l=s.parent("li").toggleClass("dropdown-submenu dropdown-hover",!!a.length).toggleClass("disabled",!a.length),d=o.parent("li").toggleClass("disabled",!r),c=(e(t.target),function(t,a){"Client"==ew.SEARCH_FILTER_OPTION?window.localStorage.setItem(t+"_filters",JSON.stringify(a)):"Server"==ew.SEARCH_FILTER_OPTION&&($body=e("body"),$body.css("cursor","wait"),e.ajax(currentPage(),{type:"POST",dataType:"json",data:{ajax:"savefilters",filters:JSON.stringify(a)}}).done((function(e){e[0]&&e[0].success&&(n.filterList.filters=a)})).always((function(){$body.css("cursor","default")})))});if(d.off("click.ew").on("click.ew",(function(e){if(d.hasClass("disabled"))return!1;_prompt(ew.language.phrase("EnterFilterName"),(function(e){a.push([e,r]),c(i,a)}),!0)})).prevAll().remove(),s.next("ul.dropdown-menu").remove(),a.length){s.closest("ul.dropdown-menu");var u=e("<ul class='dropdown-menu'></ul>");for(var p in a)e.isArray(a[p])&&(e('<li><a class="dropdown-item" data-index="'+p+'" href="#" onclick="return false;">'+a[p][0]+"</a></li>").on("click",(function(t){var n=e(this).find("a[data-index]").data("index");_prompt(ew.language.phrase("DeleteFilterConfirm").replace("%s",a[n][0]),(function(e){e&&(a.splice(n,1),c(i,a))}))})).appendTo(u),e('<li><a class="dropdown-item ew-filter-list" data-index="'+p+'" href="#" onclick="return false;">'+a[p][0]+"</a></li>").insertBefore(d).on("click",(function(t){var n=e(this).find("a[data-index]").data("index");e("<form>").attr({method:"post",action:currentPage()}).append(e("<input type='hidden'>").attr({name:"cmd",value:"resetfilter"}),e("<input type='hidden'>").attr({name:ew.TOKEN_NAME_KEY,value:ew.TOKEN_NAME}),e("<input type='hidden'>").attr({name:ew.ANTIFORGERY_TOKEN_KEY,value:ew.ANTIFORGERY_TOKEN}),e("<input type='hidden'>").attr({name:"filter",value:JSON.stringify(a[n][1])})).appendTo("body").submit()})));e("<li class='dropdown-divider'></li>").insertBefore(d),l.append(u)}},this.init=function(){if(!this._initiated){"Client"==ew.SEARCH_FILTER_OPTION&&window.localStorage||"Server"==ew.SEARCH_FILTER_OPTION&&ew.IS_LOGGEDIN&&!ew.IS_SYS_ADMIN&&""!=ew.CURRENT_USER_NAME?(e(".ew-filter-option."+this.id+" .ew-btn-dropdown").on("show.bs.dropdown",(function(t){var a=[];if("Client"==ew.SEARCH_FILTER_OPTION){var i=window.localStorage.getItem(n.id+"_filters");i&&(a=parseJson(i)||[])}else"Server"==ew.SEARCH_FILTER_OPTION&&(a=n.filterList&&n.filterList.filters?n.filterList.filters:[]);var r=e.grep(a,(function(t){if(e.isArray(t)&&2==t.length)return t}));n.setupFilters(t,r)})),e(".ew-filter-option").show()):e(".ew-filter-option").hide();var t=this.getForm(),a=e(t);if(t){this.compileTemplates();var i=/s(ea)?rch$/.test(this.id);i&&this.initSearchPanel&&!hasFormData(t)&&e("#"+this.id+"-search-panel").removeClass("show"),e(".ew-search-toggle[data-form="+this.id+"]").on("click.bs.button",(function(){e("#"+e(this).data("form")+"-search-panel").collapse("toggle")})),e(".ew-table .ew-search-operator").text().trim()||e(".ew-table .ew-search-operator").parent("td").hide(),i&&e(".ew-highlight[data-form="+this.id+"]").on("click.bs.button",(function(){e("span."+e(this).data("name")).toggleClass("ew-highlight-search")})),i&&a.find("select[id^=z_]").each((function(){"BETWEEN"!=e(this).change().val()&&a.find("#w_"+this.id.substr(2)).change()})),this.multiPage&&this.multiPage.render(),loadjs.ready(["editor"],this.initEditors.bind(this)),this.updateLists(),this.initUpload(),this.$element.is("form")&&(a.submit((function(e){return n.submit()})),a.find("[data-field], .ew-priv").change((function(){ew.CONFIRM_CANCEL&&(n.modified=!0)})),a.find("#btn-cancel[data-href]").click((function(){n.updateTextArea();var a=e(this).data("href");n.modified&&hasFormData(t)?_prompt(ew.language.phrase("ConfirmCancel"),(function(e){e&&(window.location=a)})):window.location=a}))),this._initiated=!0,this.$element.data("form",this)}}},ew.addForm(this)}var Rt=e(document),Nt=e("body"),Mt={},Dt=new URL(window.location);function Lt(t){var a=e.isString(t)?t:Qt(t).id;return Mt[a]}var jt,Ft=ew.removeSpinner;function $t(){var t=Nt.data("_spinner");t&&t.cancel(),t=e.later(500,null,(function(){!0!==Rt.data("_ajax")&&Ft()})),Nt.data("_spinner",t)}function Ut(t){var a=t&&t.target?t.target:document;e(a).find(".ew-icon").closest("a, button").add(".ew-tooltip").tooltip({container:"body",trigger:ew.IS_MOBILE?"manual":"hover",placement:"bottom",sanitizeFn:ew.sanitizeFn})}function Ht(t){var a=t&&t.target?t.target:document;e.fn.pStrength&&"undefined"!=typeof ew.MIN_PASSWORD_STRENGTH&&e(a).find(".ew-password-strength").each((function(){var t=e(this);t.data("pStrength")||t.pStrength({changeBackground:!1,backgrounds:[],passwordValidFrom:ew.MIN_PASSWORD_STRENGTH,onPasswordStrengthChanged:function(t,a){var n=e(this),i=e("[id='"+n.attr("data-password-strength")+"']"),r=i.find(".progress-bar");if(i.width(n.outerWidth()),n.val()){var o=a+"%";a<25?r.addClass("bg-danger").removeClass("bg-warning bg-info bg-success"):a<50?r.addClass("bg-warning").removeClass("bg-danger bg-info bg-success"):a<75?r.addClass("bg-info").removeClass("bg-danger bg-warning bg-success"):r.addClass("bg-success").removeClass("bg-danger bg-warning bg-info"),r.css("width",o),a>25&&(o=ew.language.phrase("PasswordStrength").replace("%p",o)),r.html(o),i.removeClass("d-none").show(),n.data("validated",a>=ew.MIN_PASSWORD_STRENGTH)}else i.addClass("d-none").hide(),n.data("validated",!1)}})})),e.fn.pGenerator&&e(a).find(".ew-password-generator").each((function(){var t=e(this);t.data("pGenerator")||t.pGenerator({passwordLength:ew.GENERATE_PASSWORD_LENGTH,uppercase:ew.GENERATE_PASSWORD_UPPERCASE,lowercase:ew.GENERATE_PASSWORD_LOWERCASE,numbers:ew.GENERATE_PASSWORD_NUMBER,specialChars:ew.GENERATE_PASSWORD_SPECIALCHARS,onPasswordGenerated:function(t){var a=e(this);e("#"+a.attr("data-password-field")).val(t).change().focus().triggerHandler("click"),e("#"+a.attr("data-password-confirm")).val(t),e("#"+a.attr("data-password-strength")).addClass("d-none").hide()}})}))}function Yt(t,a){var n=ew.RELATIVE_PATH+ew.API_URL,i=new URLSearchParams(a);if(ew.USE_URL_REWRITE){if(e.isString(t))n+=t||"";else if(e.isArray(t)){var r=t.map((function(e){return encodeURIComponent(e)})).join("/");n+=r||""}}else t&&i.set(ew.API_ACTION_NAME,t);var o=i.toString();return n+(o?"?"+o:"")}function Bt(t){var a=t&&t.target?t.target:document;e(a).find(".ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)").click((function(t){var a=e(this).attr("href");a&&"#"!=a&&zt(a),t.preventDefault()}))}function Kt(t){var a=t&&t.target?t.target:document,n=e(a),i=n.find("input[type=checkbox].ew-multi-select"),r=function(e){var t=i.filter("[name^='"+e+"_']"),a=t.length,n=t.filter(":checked").length;t.closest("form").find("input[type=checkbox]#"+e).prop("checked",n==a).prop("indeterminate",n!=a&&0!=n)};i.click((function(e){r(this.name.split("_")[0])})),n.find("input[type=checkbox].ew-priv:not(.ew-multi-select)").each((function(){r(this.id)}))}function zt(e,t){var a,n=window.location!=window.parent.location&&window.parent.jQuery?window.parent.jQuery:jQuery;Nt.css("cursor","wait"),ew.SHOW_EXPORT_DIALOG&&((a=n("#ew-message-box")).find(".modal-body").html("<p>"+ew.language.phrase("Exporting")+"</p>"),a.find(".modal-footer button").prop("disabled",!0),a.modal("show"));var i=t?"POST":"GET";n.ajax({url:e,type:i,cache:!1,data:t||null,xhrFields:{responseType:"blob"}}).done((function(e,t,n){var i=window.URL.createObjectURL(e),r=document.createElement("a"),o=n.getResponseHeader("Content-Disposition");r.style.display="none",r.href=i,r.download=o.includes("attachment; filename="),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(i),ew.SHOW_EXPORT_DIALOG&&a.modal("hide"),Rt.trigger("export",[{type:"done",url:i}])})).fail((function(){ew.SHOW_EXPORT_DIALOG&&a.find(".modal-body").html("<div class='text-danger'><h4>"+ew.language.phrase("FailedToExport")+"</h4>"+response+"</div>"),Rt.trigger("export",[{type:"fail",url:url}])})).always((function(){ew.SHOW_EXPORT_DIALOG&&a.find(".modal-footer button").prop("disabled",!1),Nt.css("cursor","default"),Rt.trigger("export",[{type:"always",url:e}])}))}function Gt(t){if(ew.LAZY_LOAD){var a=t&&t.target?t.target:document,n=e(a),i=n.find("img.ew-lazy"),r=[];i.each((function(t){var a=this,i=e(a).data("src"),o=(n.attr("id")||"")+"lazyload"+cn();r.push(o),loadjs("img!"+i,o,{success:function(){a.src=i},numRetries:ew.LAZY_LOAD_RETRIES})})),loadjs.ready(r,(function(){Rt.trigger("lazyload")}))}}function Wt(t){if(ew.USE_COLORBOX){var a=t&&t.target?t.target:document,n=Object.assign({},ew.lightboxSettings,{title:ew.language.phrase("LightboxTitle"),current:ew.language.phrase("LightboxCurrent"),previous:ew.language.phrase("LightboxPrevious"),next:ew.language.phrase("LightboxNext"),close:ew.language.phrase("LightboxClose"),xhrError:ew.language.phrase("LightboxXhrError"),imgError:ew.language.phrase("LightboxImgError")});e(a).find(".ew-lightbox").each((function(){var t=e(this);t.colorbox(Object.assign({rel:t.data("rel")},n))}))}}function Vt(t){if(ew.EMBED_PDF){var a=t&&t.target?t.target:document,n=Object.assign({},ew.PDFObjectOptions);e(a).find(".ew-pdfobject").not(":has(.pdfobject)").each((function(){var t=e(this),a=t.data("url"),i=t.html();a&&PDFObject.embed(a,this,Object.assign(n,{fallbackLink:i}))}))}}function qt(t){var a=t&&t.target?t.target:document,n=e(a);n.find("input[data-toggle=tooltip],textarea[data-toggle=tooltip],select[data-toggle=tooltip]").each((function(){var t=e(this);t.tooltip(Object.assign({html:!0,placement:"bottom",sanitizeFn:ew.sanitizeFn},t.data()))})),n.find("a.ew-tooltip-link").each(Ka),n.find(".ew-tooltip").tooltip({placement:"bottom",sanitizeFn:ew.sanitizeFn}),n.find(".ew-popover").popover({sanitizeFn:ew.sanitizeFn})}function Xt(t){if(e.isString(t))try{return JSON.parse(t)}catch(e){return}return t}function Jt(t,a,n){var i=e("#ew-prompt"),r=i.find(".modal-body").empty();if(n){r.append('<div class="form-group row"><label class="col-form-label">'+t+'</label><input type="text" class="form-control d-block w-100"></div>');var o=r.find("input").click((function(){o.removeClass("is-invalid")}));i.find(".modal-footer .btn-primary").off().click((function(t){var n=o.val().trim();""==n?(o.addClass("is-invalid"),o[0].focus()):(i.modal("hide"),e.isFunction(a)&&a(n))})),i.on("shown.bs.modal",(function(e){o[0].focus()}))}else r.append("<div>"+t+"</div>"),i.find(".modal-footer .btn-primary").off().click((function(t){i.modal("hide"),e.isFunction(a)&&a(!0)})),a?i.find(".modal-footer .btn-default").off().click((function(t){i.modal("hide"),e.isFunction(a)&&a(!1)})).show():i.find(".modal-footer .btn-default").hide();i.modal("show")}function Qt(t){if(t instanceof kt)return t.$element[0];var a=e(t),n=a.closest(".ew-form");return n[0]||(n=a.closest(".ew-grid, .ew-multi-column-grid").find(".ew-form").not(".ew-pager-form")),n[0]}function Zt(t,a,n,i){var r=this.$element?this.$element[0]:this.form?this.form:null;if(r&&((this._form?this:Mt[r.id])&&(this.form&&e.isUndefined(t)?t=Lt(this).lists[this.name.replace(/^(sv_)?[xy]\d*_/,"x_")].childFields.slice():e.isString(t)&&(t=ba(t,r)),t&&(!e.isArray(t)||0!=t.length)))){var o=this,s=Promise.resolve();if(e.isArray(t)&&e.isString(t[0])){for(var l=0,d=t.length;l<d;l++){var c=t[l].split(" ");if(1==c.length&&o.form){var u=Aa(o,!1).match(/^([xy]\d*_)/);u&&(t[l]=t[l].replace(/^([xy]\d*_)/,u[1]))}var p=ba(t[l],r),f=[];if(2==c.length&&e.isArray(p)){var h=e(p);h.each((function(){if(!f.includes(this.name)){f.push(this.name);var e=h.filter("[name='"+this.name+"']"),t=e.attr("type"),r=["radio","checkbox"].includes(t)?e.get():e[0];s=s.then(ea.bind(o,r,a,n,i))}}))}else s=s.then(ea.bind(o,p,a,n,i))}var g=Lt(o).lists[o.name.replace(/^[xy]\d*_/,"x_")];g&&e.isArray(g.autoFillTargetFields)&&g.autoFillTargetFields[0]&&(s=s.then(Ba.bind(null,o)))}else s=s.then(ea.bind(o,t,a,n,i));return s.then((function(){Rt.trigger("updatedone",[{source:o,target:t}])}))}}function ea(t,a,n,i){var r=this,o=e.makeArray(arguments),s=Sa(t),l=Aa(t,!1);if(l){var d=Qt(t);if(d&&d.id){var c=Mt[d.id];if(c){var u=l.match(/^([xy])(\d*)_/),p=u?u[1]:"",f=u?u[2]:"",h=l.replace(/^([xy])(\d*)_/,"x_"),g=[],m=c.lists[h];if(e.isUndefined(a)&&(a=m.parentFields.slice(),""!=f))for(var w=0,v=a.length;w<v;w++){var b=a[w].split(" ");1==b.length&&(a[w]=a[w].replace(/^x_/,"x"+f+"_"))}if(e.isArray(a)&&a.length>0)if(e.isArray(a[0]))g=a;else if(e.isString(a[0]))for(w=0,v=a.length;w<v;w++)g.push(Sa(a[w],d));oa(t)||Oa(t);var y=function(a){var n=Aa(t);a.forEach((function(e){var a={data:e,parents:g,valid:!0,name:n,form:d};Rt.trigger("addoption",[a]),a.valid&&Ra(t,e,d)})),!t.options&&t.length&&(Na(t),t=ba(l,d)),Ma(t,s),!1!==i&&(!t.options&&t.length?e(t).first().triggerHandler("click"):e(t).first().change())};e.isUndefined(n)&&(n=m.ajax);var E=function(){/s(ea)?rch$/.test(d.id)&&"x"==p&&(o[0]=l.replace(/^x_/,"y_"),Zt.apply(r,o))};if(!e.isBoolean(n)||e.isArray(m.options)&&m.options.length>0){var _=m.options;return y(_),E(),_}var S=Aa(t),x=Object.assign({page:m.page,field:m.field,ajax:"updateoption",language:ew.LANGUAGE_ID,name:S},ta("#p_"+l,d));oa(t)&&r._form?x.v0=s[0]?s[0]:cn():ra(t)&&(x.v0=s[0]?e(t).data("multiple")?s.join(ew.MULTIPLE_OPTION_SEPARATOR):s[0]:cn());w=0;for(var T=g.length;w<T;w++)x["v"+(w+1)]=g[w].join(ew.MULTIPLE_OPTION_SEPARATOR);return e.ajax(Yt(ew.API_LOOKUP_ACTION),{type:"POST",dataType:"json",data:x,async:n}).done((function(e){var t=e.records||[];return y(t),E(),t}))}}}}function ta(t,a){t=t.replace(/\[\]$/,"");var n={},i=((a=e.isString(a)?/^#/.test(a)?a:"#"+a:a)?e(a).find(t):e(t)).val();i&&new URLSearchParams(i).forEach((function(e,t){n[t]=e}));return n}function aa(e){return e&&["1","y","t","true"].includes(e.toLowerCase())}function na(t,a,n,i,r,o){if(!t)return!1;var s=e(t),l=s.attr("target"),d=s.attr("action"),c=r&&s.find("input[type=checkbox][name='key_m[]']")[0];if(c&&!ua(t))return la(ew.language.phrase("NoRecordSelected")),!1;if(i)if(e("iframe.ew-export").remove(),"email"==n&&(a+=("&"+e(o).serialize()).replace(/&export=email/i,"")),c){e("<iframe>").attr("name","ew-export-frame").addClass("ew-export d-none").appendTo(Nt);try{s.append(e("<input type='hidden'>").attr({name:"custom",value:"1"})).attr({action:a,target:"ew-export-frame"}).find("input[name=exporttype]").val(n).end().submit()}finally{s.attr({target:l||"",action:d}).find("input[name=custom]").remove()}}else e("<iframe>").attr({name:"ew-export-frame",src:a}).addClass("ew-export d-none").appendTo(Nt);else s.find("input[name=exporttype]").val(n),["xml","print"].includes(n)?s.submit():zt(d,s.serialize());return!1}function ia(t){var a=e(t);return t&&a.is(":hidden")&&a.data("editor")}function ra(t){var a=e(t);return t&&a.is(":hidden")&&a.data("lookup")}function oa(t){var a=e(t);return a[0]&&a.is(":hidden")&&a.data("autosuggest")}function sa(e){return Lt(e).autoSuggests[e.id]}function la(t,a,n){if(ew.IS_MOBILE)alert(t.replace(/<[^>]*>/g,"")),a&&setTimeout(a,100);else{var i=e("#ew-message-box");i.find(".modal-body").html('<p class="text-'+(n||"danger")+'">'+t+"</p>"),i.modal("show"),a&&i.off("hidden.bs.modal").on("hidden.bs.modal",a)}}function da(t){if(t){var a=e(t);if(ia(t))return a.data("editor").focus();!t.options&&t.length?t=a.filter("[value!='{value}']")[0]:oa(t)&&(t=sa(t).input);var n=a.closest(".form-group, [id^='el']");ra(t)?n.find(":button").on("click",(function(){n.find(".is-invalid").removeClass("is-invalid")})):"checkbox"==t.type||"radio"==t.type?a.filter("[value!='{value}']").addClass("is-invalid").focus().one("click keypress keyup",(function(){n.find(".is-invalid").removeClass("is-invalid")})):e(t).addClass("is-invalid").focus().select().parent().one("click keypress keyup",(function(){n.find(".is-invalid").removeClass("is-invalid")}))}}function ca(e){return""!=Sa(e).join("")}function ua(t){return e(t).find("input[type=checkbox][name='key_m[]']:checked",t).length>0}function pa(t){t&&t.form&&e(t.form.elements).filter("input[type=checkbox][name^="+t.name+"_], [type=checkbox][name="+t.name+"]").not(t).not(":disabled").prop("checked",t.checked)}function fa(t,a){var n=e(a),i=n.closest(".ew-table");i[0]&&(n.data("selected")?n.removeClass(i.data("rowhighlightclass")||"ew-table-highlight-row").removeClass(i.data("roweditclass")||"ew-table-edit-row").addClass(i.data("rowselectclass")||"ew-table-select-row"):[ew.ROWTYPE_ADD,ew.ROWTYPE_EDIT].includes(n.data("rowtype"))?n.removeClass(i.data("rowselectclass")||"ew-table-select-row").removeClass(i.data("rowhighlightclass")||"ew-table-highlight-row").addClass(i.data("roweditclass")||"ew-table-edit-row"):n.removeClass(i.data("rowselectclass")||"ew-table-select-row").removeClass(i.data("roweditclass")||"ew-table-edit-row").removeClass(i.data("rowhighlightclass")||"ew-table-highlight-row"))}function ha(t){e(t.rows).each((function(t,a){var n=e(a);!n.data("checked")&&n.data("selected")&&(n.data("selected",!1),fa(0,a))}))}function ga(t){var a=e(t);if(a.closest(".ew-table")[0]){var n=a.closest(".ew-table > tbody > tr");n.siblings("[data-rowindex='"+n.data("rowindex")+"']").addBack().each((function(t,a){var n=e(a);n.data("selected",n.data("checked"))}))}}function ma(t){var a=e(t),n=a.closest(".ew-table")[0];if(n){ha(n);var i=a.closest(".ew-table > tbody > tr");i.siblings("[data-rowindex='"+i.data("rowindex")+"']").addBack().each((function(t,a){e(a).data("selected",!0),fa(0,a)}))}}function wa(t,a,n){var i=e(a),r=e(a.rows);if(a&&a.rows&&(n||!i.data("isset"))&&0!=a.tBodies.length){var o=function(t){var a=e(this);if(!a.data("selected")&&![ew.ROWTYPE_ADD,ew.ROWTYPE_EDIT].includes(a.data("rowtype"))){var n=a.closest(".ew-table");if(!n[0])return;a.siblings("[data-rowindex='"+a.data("rowindex")+"']").addBack().each((function(t,a){e(a).addClass(n.data("rowhighlightclass")||"ew-table-highlight-row")}))}},s=function(t){var a=e(this);a.data("selected")||[ew.ROWTYPE_ADD,ew.ROWTYPE_EDIT].includes(a.data("rowtype"))||a.siblings("[data-rowindex='"+a.data("rowindex")+"']").addBack().each(fa)},l=function(t){var a=e(this),n=a.closest(".ew-table")[0],i=e(t.target);if(n&&!i.hasClass("btn")&&!i.hasClass("ew-preview-row-btn")&&!i.is(":input")&&!a.data("checked")){var r=a.data("selected");ha(n),a.siblings("[data-rowindex='"+a.data("rowindex")+"']").addBack().each((function(t,a){e(a).data("selected",!r),fa(0,a)}))}},d=r.filter("[data-rowindex=1]").length||r.filter("[data-rowindex=0]").length||1,c=r.filter(":not(.ew-template)").each((function(){e(this.cells).removeClass("ew-table-last-row").last().addClass("ew-table-last-col")})).get(),u=i.parentsUntil(".ew-grid","."+ew.RESPONSIVE_TABLE_CLASS)[0];if(c.length)for(var p=1;p<=d;p++){var f=c[c.length-p];e(f.cells).each((function(){this.rowSpan==p&&e(this).addClass("ew-table-last-row").toggleClass("ew-table-border-bottom",!!u&&u.clientHeight>a.offsetHeight)}))}var h=i.closest("form")[0],g=h&&e(h.elements).filter("input#action:not([value^=grid])").length>0;e(a.tBodies[a.tBodies.length-1].rows).filter(":not(.ew-template):not(.ew-table-preview-row)").each((function(t){var a=e(this);g&&!a.data("isset")&&([ew.ROWTYPE_ADD,ew.ROWTYPE_EDIT].includes(a.data("rowtype"))&&a.on("mouseover",(function(){this.edit=!0})).addClass("ew-table-edit-row"),a.on("mouseover",o).on("mouseout",s).on("click",l),a.data("isset",!0));var n=t%(2*d)<d;a.toggleClass("ew-table-row",n).toggleClass("ew-table-alt-row",!n)})),va(t,i.closest(".ew-grid")[0],n),i.data("isset",!0)}}function va(t,a,n){var i=e(a);!a||!n&&i.data("isset")||(0!=(i.find("table.ew-multi-column-table").length?i.find("td[data-rowindex]").length:i.find("table.ew-table > tbody:first > tr:not(.ew-table-preview-row, .ew-template)").length)||i.find(".ew-grid-upper-panel, .ew-grid-lower-panel")[0]||i.hide(),i.find(".ew-grid-middle-panel:visible").hasClass(ew.RESPONSIVE_TABLE_CLASS)&&i.width()>e(".content").width()&&(i.addClass("d-flex"),i.closest(".ew-detail-pages").addClass("d-block"),i.closest(".ew-form").addClass("w-100"),ew.USE_OVERLAY_SCROLLBARS&&i.find(".ew-grid-middle-panel:not(.ew-preview-middle-panel)").overlayScrollbars(ew.sidebarScrollbarsOptions)),i.data("isset",!0))}function ba(t,a){var n="[name='"+t+"']",i=t.split(" ");2==i.length&&(n="[data-table='"+i[0]+"'][data-field='"+Aa(i[1])+"']:not([name^=o]):not([name^='x$'])"),n="input"+n+",select"+n+",textarea"+n+",button"+n;var r=(a=e.isString(a)?/^#/.test(a)?a:"#"+a:a)?e(a).find(n):e(n);return 1==r.length&&r.is(":not([type=checkbox]):not([type=radio])")?r[0]:r.get()}function ya(t,a){a=e.isString(a)?"#"+a:a;var n="#"+t.replace(/([\$\[\]])/g,"\\$1")+",[name='"+t+"']";return a?e(a).find(n)[0]:e(n).first()[0]}function Ea(e,t){for(;e=e.parentNode;)if(e&&1==e.nodeType&&(!t||t(e)))return e;return null}function _a(e,t){return String(e).toLowerCase()==String(t).toLowerCase()}function Sa(t,a){var n;e.isString(t)?n=2==t.split(" ").length?ba(t):ba(t,a):n=t;if(n.options)return e(n).find("option:selected[value!='']").map((function(){return this.value})).get();if(e.isNumber(n.length))return e(n).filter(":checked[value!='{value}']").map((function(){return this.value})).get();var i=e(n).data();return i.lookup&&i.multiple?n.value.split(ew.MULTIPLE_OPTION_SEPARATOR):[n.value]}function xa(t,a){var n;e.isString(t)?n=2==t.split(" ").length?ba(t):ba(t,a):n=t;return n.options?e(n).find("option:selected[value!='']").map((function(){return this.text})).get():e.isNumber(n.length)?e(n).filter(":checked[value!='{value}']").map((function(){return e(this).parent().text()})).get():oa(n)?[sa(n).input.value]:ra(n)?e(n).parent().find(".ew-lookup-text .ew-option").map((function(){return e(this).text().trim()})).get():[n.value]}function Ta(t){var a=Aa(t);return e(t).closest(".form-group, [id^=el][id$='"+a.replace(/^([xy]\d*_)/,"")+"']").find("#dsl_"+a)}function Oa(t){if(t.options)for(var a="select-multiple"==t.type||!1===e(t).data("pleaseselect")||t.length>0&&""!=t.options[0].value?0:1,n=t.length-1;n>=a;n--)t.options[n]=null;else if(t.length){Aa(t);Ta(t).data("options",[]).find("div").first().empty()}else if(oa(t)){var i=sa(t);i._options=[],i.input.value="",t.value=""}else ra(t)&&e(t).data("options",[])}function Aa(t,a){var n=e.isString(t)?t:e(t).attr("name")||e(t).attr("id");return!1!==a?n.replace(/\[\]$/,""):n}function Ia(t,a){var n=e(a).data("value-separator");return e.isArray(n)?n[t-1]:n||", "}function Pa(t,a){for(var n=t.df,i=2;i<=4;i++)if(t["df"+i]&&""!=t["df"+i]){var r=Ia(i-1,a);if(e.isUndefined(r))break;""!=n&&(n+=r),n+=t["df"+i]}return n}function Ca(e){return ew.OPTION_HTML_TEMPLATE.replace(/\{value\}/g,e)}function ka(e,t){if(e.length>(t||ew.MAX_OPTION_COUNT))return ew.language.phrase("CountSelected").replace("%s",e.length);if(e.length){for(var a="",n=0;n<e.length;n++)a+=Ca(e[n]);return a}return ew.language.phrase("PleaseSelect")}function Ra(t,a,n){var i,r=Mt[n.id],o=Aa(t),s=Aa(t,!1),l=a.lf,d={lf:a.lf,df1:a.df,df2:a.df2,df3:a.df3,df4:a.df4};i=r.lists(s).template&&!oa(t)?r.lists(s).template.render(d,ew.jsRenderHelpers):Pa(a,t)||l;var c={data:d,name:o,form:n.$element,value:l,text:i};if(t.options)Object.assign(c,{option:e("<option></option>").val(c.value).html(c.text)}),Rt.trigger("newoption",[c]),e(t).append(c.option);else if(t.length){var u=Ta(t),p=u.data("options");u[0]&&p&&p.push({val:c.value,lbl:c.text})}else if(oa(t)){sa(t)._options.push({val:c.value,lbl:c.text})}else if(ra(t)){var f=e(t);(p=f.data("options")||[]).push({val:c.value,lbl:c.text}),f.data("options",p)}return c.text}function Na(t){var a=Aa(t),n=Qt(t),i=Ta(t);if(i[0]&&i.data("options")){var r=i.parent().find("#tp_"+a);if(r[0]){var o=ew.IS_MOBILE?1:parseInt(i.data("repeatcolumn"),10)||5,s=r.contents(),l=i.data("options"),d=s.attr("type"),c=i.prevAll(".dropdown-toggle"),u=i.closest(".ew-dropdown-list").find(".ew-dropdown-clear");if(l&&l.length){if(o>1||"checkbox"==d||!c[0]){var p=e('<div class="d-table ew-item-table"></div>');"checkbox"==d&&p.click((function(e){e.stopPropagation()}));for(var f=0,h=l.length;f<h;f++){var g;f%o==0&&(g=e('<div class="d-table-row"></div>')),(y=s.clone(!0).val(l[f].val).click((function(t){if(c[0]){var a=p.find("input[name='"+this.name+"']:checked").map((function(){return e(this).parent().text()}));c.html(ka(a.get(),e(this).data("maxcount"))),u.prop("disabled",0==a.length)}}))).attr("id",y.attr("id")+"_"+f+"_"+cn());var m=e('<label class="custom-control-label"></label>').attr("for",y.attr("id")).append(l[f].lbl),w={name:a,form:n,value:l[f].val,text:l[f].lbl,option:e('<div class="custom-control custom-'+d+'"></div>').append(y.add(m))};if(Rt.trigger("newoption",[w]),e('<div class="d-table-cell"></div>').append(w.option).appendTo(g),f%o==o-1)p.append(g);else if(f==h-1){for(var v=f%o+1;v<o;v++)g.append('<div class="d-table-cell"></div>');p.append(g)}}i.find("div").first().append(p)}else{var b=e('<div class="list-group"></div>');for(f=0,h=l.length;f<h;f++){var y;(y=s.clone(!0).val(l[f].val).click((function(t){var a=e(this).closest(".list-group-item");a.hasClass("active")&&(this.checked=!1),a.siblings(".list-group-item").removeClass("active"),a.toggleClass("active",this.checked),c.html(this.checked?a.text():ew.language.phrase("PleaseSelect")),u.prop("disabled",!this.checked)}))).attr("id",y.attr("id")+"_"+f+"_"+cn());m=e('<label class="custom-control-label"></label>').attr("for",y.attr("id")).append(l[f].lbl);var E=e('<a class="list-group-item list-group-item-action" href="#"></a>').append(y,m);w={name:a,form:n,value:l[f].val,text:l[f].lbl,option:E};Rt.trigger("newoption",[w]),b.append(w.option)}i.find("div").first().append(b)}u.prop("disabled",c&&(c.html()||"").trim()==ew.language.phrase("PleaseSelect")).off().click((function(e){i.find("[data-field][type=radio], [data-field][type=checkbox]").prop("checked",!1).first().triggerHandler("click"),i.find(".list-group-item.active").removeClass("active"),c.html(ew.language.phrase("PleaseSelect"))}))}i.hasClass("dropdown-menu")||i.removeClass("d-none"),i.data("options",[])}}}function Ma(t,a){if(t&&a){var n=e(t);if(e.isArray(a))if(t.options)e(t).val(a),"select-one"==t.type&&-1==t.selectedIndex&&(t.selectedIndex=0);else if(t.length)1==t.length&&"checkbox"==t[0].type&&"{value}"!=t[0].value?t[0].checked=aa(t[0].value)===aa(a[0]):n.val(a).closest(".ew-dropdown-list").find(".ew-dropdown-clear").prop("disabled",!1);else if(oa(t)&&1==a.length){for(var i=0,r=(l=(h=sa(t))._options||[]).length;i<r;i++)if(l[i].val==a[0]){t.value=l[i].val,h.input.value=l[i].lbl;break}}else if(ra(t)){for(var o=[],s=[],l=(n=e(t)).data("options")||[],d=0,c=a.length;d<c;d++)for(i=0,r=l.length;i<r;i++)if(a[d]==l[i].val){o.push(l[i].val),s.push(Ca(l[i].lbl));break}n.val(o.join(ew.MULTIPLE_OPTION_SEPARATOR)),n.parent().find(".ew-lookup-text").html(ka(s,n.data("maxcount")))}else t.type&&(t.value=a.join(ew.MULTIPLE_OPTION_SEPARATOR));if(t.options)"select-one"==t.type&&2==t.options.length&&!t.options[1].selected&&g(t)?t.options[1].selected=!0:"select-multiple"==t.type&&1==t.options.length&&!t.options[0].selected&&g(t)&&(t.options[0].selected=!0);else if(t.length){2==t.length&&g(t[1])&&(t[1].checked=!0),"radio"==t[0].type&&n.filter(":checked").closest(".list-group-item").addClass("active");var u=n.closest(".dropdown-menu"),p=u.closest(".ew-dropdown-list").find(".dropdown-toggle");if(p[0]){var f=u.find("input[name='"+t[0].name+"']:checked").map((function(){return e(this).parent().text()}));p.html(ka(f.get(),n.data("maxcount")))}}else if(oa(t)){var h;1==(l=(h=sa(t))._options||[]).length&&g(t)&&(t.value=l[0].val,h.input.value=l[0].lbl)}}function g(t){if(!e(t).data("autoselect"))return!1;var a=Qt(t);if(a){if(/s(ea)?rch$/.test(a.id))return!1;var n=Mt[a.id].lists(t.id);return!n||0!=n.parentFields.length}return!1}}function Da(){e("form.ew-form.ew-wait").removeClass("ew-wait").each((function(){var e=Mt[this.id];e&&(e.multiPage&&e.multiPage.lastPageSubmit||e.enableForm())})),$t(),Rt.data("_ajax",!1)}function La(e,t){var a,n=0,i=/<script([^>]*)>([\s\S]*?)<\/script\s*>/gi;for(e=e.replace(/<head>[\s\S]*<\/head>/,"");null!=(a=i.exec(e));){var r=a[2];/(\s+type\s*=\s*['"]*text\/javascript['"]*)|^((?!\s+type\s*=).)*$/i.test(a[1])&&r&&Fa(r,"scr_"+t+"_"+n++)}}function ja(e){for(var t,a=/<script([^>]*)>([\s\S]*?)<\/script\s*>/gi,n=e;null!=(t=a.exec(e));){var i=t[0];/(\s+type\s*=\s*['"]*text\/javascript['"]*)|^((?!\s+type\s*=).)*$/i.test(t[1])&&(n=n.replace(i,""))}return n}function Fa(e,t){var a=document.createElement("SCRIPT");return t&&(a.id=t),a.text=e,document.body.appendChild(a)}function $a(t){t&&e("script[id^='scr_"+t+"_']").remove()}function Ua(t){var a=ja(t).match(/<body[\s\S]*>[\s\S]*<\/body>/i);return e(a[0]).not("div[id^=ew].modal, #ew-tooltip, #cookie-consent")}function Ha(e){return e.options?Array.prototype.map.call(e.options,(function(e){return{value:e.value,name:e.text}})):e.length&&Ta(e).data("options")||[]}function Ya(t){var a=e(this),n=a.data("args");$a("ModalDialog");var i=a.removeData("args").find(".modal-body form").data("form");i&&i.destroyEditor();var r=a.find(".modal-body").html("");r.ewjtable&&r.ewjtable("instance")&&r.ewjtable("destroy"),a.find(".modal-footer .btn-primary").unbind(),a.find(".modal-dialog").removeClass((function(e,t){var a=t.match(/table\-\w+/);return a?a[0]:""})),a.data("showing",!1),a.data("url",null),n&&n.reload&&window.location.reload(!0)}function Ba(t){var a=Lt(t).$element[0];if(a){var n=Sa(t),i=Aa(t),r=i.match(/^([xy])(\d*)_/),o=(r&&r[1],r?r[2]:""),s=i.replace(/^([xy])(\d*)_/,"x_"),l=Lt(t).lists[s],d=l.autoFillTargetFields,c=function(n){for(var r=n&&n.records||"",s=r?r[0]:[],l=0;l<d.length;l++){var c=ba(d[l].replace(/^x_/,"x"+o+"_"),a);if(c){var u=e.isValue(s["af"+l])?s["af"+l]:"",p={results:r,result:s,data:u,form:a,name:i,target:d[l],cancel:!1,trigger:!0};if(e(t).trigger("autofill",[p]),p.cancel)continue;u=p.data,c.options||c.length&&"radio"==c[0].type||c.length&&"checkbox"==c[0].type?Ma(c,u.split(",")):oa(c)?(c.value=u,sa(c).input.value=u,Zt.call(Mt[a.id],c)):ra(c)?(c.value=u,Zt.call(Mt[a.id],c)):ia(c)?(c.value=u,e(c).data("editor").set()):c.value=u,p.trigger&&e(c).change()}}return s};if(n.length>0&&""!=n[0]){var u=Object.assign({page:l.page,field:l.field,ajax:"autofill",v0:n[0],language:ew.LANGUAGE_ID},ta("#p_"+i,a)),p=l.parentFields.slice();if(""!=o)for(var f=0,h=p.length;f<h;f++){1==(n=p[f].split(" ")).length&&(p[f]=p[f].replace(/^x_/,"x"+o+"_"))}for(var g=p.map((function(e){return Sa(e,a)})),m=(f=0,g.length);f<m;f++)u["v"+(f+1)]=g[f].join(ew.MULTIPLE_OPTION_SEPARATOR);return e.post(Yt(ew.API_LOOKUP_ACTION),u,c,"json")}return c()}}function Ka(t,a){var n=e(a),i=e("#"+n.data("tooltip-id")),r=n.data("trigger")||"hover",o=n.data("placement")||(ew.CSS_FLIP?"left":"right");i[0]&&(""!=i.text().trim()||i.find("img[src!='']")[0])&&(n.data("bs.popover")||n.popover({html:!0,placement:o,trigger:r,delay:100,container:e("#ew-tooltip")[0],content:i.html(),sanitizeFn:ew.sanitizeFn}).on("show.bs.popover",(function(t){var a,i=e(n.data("bs.popover").getTipElement()).css("z-index",9999);(a=n.data("tooltip-width"))&&i.css("max-width",parseInt(a,10)+"px")})))}function za(){return location.href.split("#")[0].split("?")[0]}function Ga(e){return Qa(e,"us",ew.DATE_SEPARATOR)}function Wa(e){return Qa(e,"usshort",ew.DATE_SEPARATOR)}function Va(e){return Qa(e,"std",ew.DATE_SEPARATOR)}function qa(e){return Qa(e,"stdshort",ew.DATE_SEPARATOR)}function Xa(e){return Qa(e,"euro",ew.DATE_SEPARATOR)}function Ja(e){return Qa(e,"euroshort",ew.DATE_SEPARATOR)}function Qa(e,t,a){if(!e||""==e.length)return!0;var n=(e=e.replace(/ +/g," ").trim()).split(" ");if(n.length>0){var i,r,o,s,l;if(r=(i=/^(\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\d|[3][0|1])$/).exec(n[0]))o=r[1],s=r[2],l=r[3];else{var d=nn(a);switch(t){case"std":i=new RegExp("^(\\d{4})"+d+"([0]?[1-9]|[1][0-2])"+d+"([0]?[1-9]|[1|2]\\d|[3][0|1])$");break;case"stdshort":i=new RegExp("^(\\d{2})"+d+"([0]?[1-9]|[1][0-2])"+d+"([0]?[1-9]|[1|2]\\d|[3][0|1])$");break;case"us":i=new RegExp("^([0]?[1-9]|[1][0-2])"+d+"([0]?[1-9]|[1|2]\\d|[3][0|1])"+d+"(\\d{4})$");break;case"usshort":i=new RegExp("^([0]?[1-9]|[1][0-2])"+d+"([0]?[1-9]|[1|2]\\d|[3][0|1])"+d+"(\\d{2})$");break;case"euro":i=new RegExp("^([0]?[1-9]|[1|2]\\d|[3][0|1])"+d+"([0]?[1-9]|[1][0-2])"+d+"(\\d{4})$");break;case"euroshort":i=new RegExp("^([0]?[1-9]|[1|2]\\d|[3][0|1])"+d+"([0]?[1-9]|[1][0-2])"+d+"(\\d{2})$")}if(!i.test(n[0]))return!1;var c=n[0].split(a);switch(t){case"std":case"stdshort":o=Za(c[0]),s=c[1],l=c[2];break;case"us":case"usshort":o=Za(c[2]),s=c[0],l=c[1];break;case"euro":case"euroshort":o=Za(c[2]),s=c[1],l=c[0]}}if(!en(o,s,l))return!1}return!(n.length>1&&!on(n[1]))}function Za(e){return 2==e.length?e>ew.UNFORMAT_YEAR?"19"+e:"20"+e:e}function en(e,t,a){e=parseInt(e,10),t=parseInt(t,10),a=parseInt(a,10);var n=[4,6,9,11].includes(t)?30:31;return 2==t&&(n=e%4>0||e%100==0&&e%400>0?28:29),rn(a,1,n)}function tn(e){if(!(e=String(e))||0==e.length)return!0;e=e.trim();var t=nn(ew.THOUSANDS_SEP),a=nn(ew.DECIMAL_POINT);return new RegExp("^[+-]?(\\d{1,3}("+(t?t+"?":"")+"\\d{3})*("+a+"\\d+)?|"+a+"\\d+)$").test(e)}function an(e){if(e=String(e),""!=ew.THOUSANDS_SEP){var t=new RegExp(nn(ew.THOUSANDS_SEP),"g");e=e.replace(t,"")}return""!=ew.DECIMAL_POINT&&(e=e.replace(ew.DECIMAL_POINT,".")),parseFloat(e)}function nn(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function rn(t,a,n){return!t||0==t.length||((e.isNumber(a)||e.isNumber(n))&&tn(t)&&(t=an(t)),!(!e.isNull(a)&&t<a)&&!(!e.isNull(n)&&t>n))}function on(e){return!e||0==e.length||(e=e.trim(),new RegExp("^(0\\d|1\\d|2[0-3])"+nn(ew.TIME_SEPARATOR)+"[0-5]\\d(( ("+nn(ew.language.phrase("AM"))+"|"+nn(ew.language.phrase("PM"))+"))|("+nn(ew.TIME_SEPARATOR)+"[0-5]\\d(\\.\\d+)?)?)$","i").test(e))}function sn(e,t){if(!e||0==e.length)return!0;for(var a=e.replace(/,/g,";").split(";"),n=0,i=a.length;n<i;n++){if(t>0&&i>t)return!1;if(!ln(a[n]))return!1}return!0}function ln(e){return!e||0==e.length||/^[\w.%+-]+@[\w.-]+\.[A-Z]{2,18}$/i.test(e.trim())}function dn(t){if(window.location!=window.parent.location&&parent.showMessage)return parent.showMessage(t);var a=t&&t.target?t.target:document,n=e(a).find("div.ew-message-dialog:hidden:first"),i=e.isString(t)?t.replace(/<[^>]*>/g,""):n.length?n.text():"";if(""!=i.trim())if(n.length)["success","info","warning","danger"].forEach((function(t,a){var i=n.find(".alert-"+t).toggleClass("alert-"+t),r=i.find(".alert-heading").detach(),o=i.children(":not(.icon)");if(i.find(".icon").remove(),i[0])if(ew.IS_MOBILE)alert(i.text());else{var s=e(ew.toastTemplate),l=s.find(".toast-header").addClass("bg-"+t);r[0]?l.find("strong").html(r.html()):l.find("strong").html(ew.language.phrase(t));var d=parseInt(o.css("width"),10);d>0&&(o.first().css("width","auto"),s.css("max-width",d));var c=i.html();s.find(".toast-body").html(c);var u={animation:!0,autohide:"success"==t&&ew.autoHideSuccessMessage,delay:"success"==t?ew.autoHideSuccessMessageDelay:500};e("#toast-container")[0]||Nt.append('<div id="toast-container"></div>');var p=e("#toast-container").append(s);s.toast(u).toast("show").on("hidden.bs.toast",(function(){p[0]&&!p.find(".toast.show")[0]&&p.remove()}))}}));else if(ew.IS_MOBILE)alert(i);else{var r=e("#ew-message-box");r.find(".modal-body").html(i),r.modal("show")}}function cn(){return Math.floor(100001*Math.random())+1e5}Rt.ajaxSend((function(e,t,a){var n=a.url;n.match(/\w+preview(\w+)?(\.php)?\?/i)&&Ft();var i=Yt(),r=n.startsWith(i),o=r||n.startsWith(za());!o&&n.match(/^http/i)&&(o=new URL(n).hostname==Dt.hostname);if(o)if(r&&ew.API_JWT_TOKEN&&!ew.IS_WINDOWS_AUTHENTICATION&&t.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER,"Bearer "+ew.API_JWT_TOKEN),"GET"==a.type){var s=a.url.split("?");(l=new URLSearchParams(s[1])).set(ew.TOKEN_NAME_KEY,ew.TOKEN_NAME),l.set(ew.ANTIFORGERY_TOKEN_KEY,ew.ANTIFORGERY_TOKEN),s[1]=l.toString(),a.url=s[0]+(s[1]?"?"+s[1]:"")}else{var l;if(a.data instanceof FormData)a.data.set(ew.TOKEN_NAME_KEY,ew.TOKEN_NAME),a.data.set(ew.ANTIFORGERY_TOKEN_KEY,ew.ANTIFORGERY_TOKEN);else(l=new URLSearchParams(a.data)).set(ew.TOKEN_NAME_KEY,ew.TOKEN_NAME),l.set(ew.ANTIFORGERY_TOKEN_KEY,ew.ANTIFORGERY_TOKEN),a.data=l.toString()}})),Rt.ajaxStart((function(){Rt.data("_ajax",!0),ew.addSpinner(),e("form.ew-form").addClass("ew-wait").each((function(){var e=Mt[this.id];e&&(e.multiPage&&e.multiPage.lastPageSubmit||e.disableForm())}))})),Rt.ajaxStop(Da).ajaxError(Da);var un=Object.freeze({__proto__:null,currentUrl:Dt,AutoSuggest:Ct,Form:kt,forms:Lt,addForm:function(e){Mt[e.id]=e},removeSpinner:$t,initIcons:Ut,initPasswordOptions:Ht,getApiUrl:Yt,setSessionTimer:function(){var t,a,n,i,r,o=e("#ew-timer"),s=ew.SESSION_KEEP_ALIVE_INTERVAL>0||ew.IS_LOGGEDIN&&ew.IS_AUTOLOGIN,l=function(){e.get(Yt(ew.API_SESSION_ACTION),{rnd:cn()},(function(t){t&&e.isObject(t)&&(ew.TOKEN_NAME=t[ew.TOKEN_NAME_KEY],ew.ANTIFORGERY_TOKEN=t[ew.ANTIFORGERY_TOKEN_KEY])}))};o.find(".modal-footer .btn-primary").click((function(e){n&&n.cancel(),o.modal("hide"),l(),!s&&ew.SESSION_TIMEOUT>0&&u()}));var d=function(){r=ew.SESSION_TIMEOUT_COUNTDOWN,(t=ew.SESSION_TIMEOUT-ew.SESSION_TIMEOUT_COUNTDOWN)<0&&(t=0,r=ew.SESSION_TIMEOUT),n&&n.cancel(),a&&a.cancel()},c=function(){i&&i.cancel(),n=e.later(1e3,null,(function(){r>0?(o.find(".modal-body").html('<p class="text-danger">'+ew.language.phrase("SessionWillExpire").replace("%s",r)+"</p>"),o.modal("show")):(o.find(".modal-body").html('<p class="text-danger">'+ew.language.phrase("SessionExpired")+"</p>"),d(),setTimeout((function(){o.modal("hide"),window.location=ew.TIMEOUT_URL+"?expired=1"}),1e3)),r--}),null,!0)},u=function(){d(),a=e.later(1e3*t,null,c)};if(s){var p=ew.SESSION_KEEP_ALIVE_INTERVAL>0?ew.SESSION_KEEP_ALIVE_INTERVAL:ew.SESSION_TIMEOUT-ew.SESSION_TIMEOUT_COUNTDOWN;p<=0&&(p=60),i=e.later(1e3*p,null,l,null,!0)}else ew.SESSION_TIMEOUT>0&&u()},initExportLinks:Bt,initMultiSelectCheckboxes:Kt,fileDownload:zt,lazyLoad:Gt,initLightboxes:Wt,initPdfObjects:Vt,initTooltips:qt,searchOperatorChanged:function(t){var a=e(t).closest("[id^=r_], [id^=xsc_]"),n=t.id.substr(2),i=a.find(".ew-search-field"),r=(i.find("[name='x_"+n+"'], [name='x_"+n+"[]']"),a.find(".ew-search-field2")),o=r.find("[name='y_"+n+"'], [name='y_"+n+"[]']").length,s=a.find(".ew-search-cond"),l=s.length,d=a.find(".ew-search-and"),c=a.find(".ew-search-operator").find("[name='z_"+n+"']").val(),u=a.find(".ew-search-operator2"),p=u.find("[name='w_"+n+"']").val(),f="BETWEEN"==c,h=["IS NULL","IS NOT NULL"].includes(c),g=["IS NULL","IS NOT NULL"].includes(p),m=!o||f,w=h,v=!f&&(!l||g);s.toggleClass("d-none",m).find(":input").prop("disabled",m),d.toggleClass("d-none",!f),u.toggleClass("d-none",m).find(":input").prop("disabled",m),i.toggleClass("d-none",w).find(":input").prop("disabled",w),r.toggleClass("d-none",v).find(":input").prop("disabled",v)},prompt:Jt,getForm:Qt,hasFormData:function(t){for(var a=e(t).find("[name^=x_][value!='{value}'],[name^=y_],[name^=z_],[name^=w_],[name=psearch]").filter(":enabled").get(),n=0,i=a.length;n<i;n++){var r=a[n];if(/^(z|w)_/.test(r.name)){if(/^IS/.test(e(r).val()))return!0}else if("checkbox"==r.type||"radio"==r.type){if(r.checked)return!0}else if("select-one"==r.type||"select-multiple"==r.type){if(e(r).val())return!0}else if(("text"==r.type||"hidden"==r.type||"textarea"==r.type)&&r.value)return!0}return!1},setSearchType:function(t,a){var n=e(t),i=n.closest("form"),r="";return i.find("input[name=psearchtype]").val(a||""),r="="==a?ew.language.phrase("QuickSearchExactShort"):"AND"==a?ew.language.phrase("QuickSearchAllShort"):"OR"==a?ew.language.phrase("QuickSearchAnyShort"):ew.language.phrase("QuickSearchAutoShort"),i.find("#searchtype").html(r+(r?"&nbsp;":"")),n.closest("ul").find("li").removeClass("active"),n.closest("li").addClass("active"),!1},updateOptions:Zt,getUserParams:ta,applyTemplate:function(t,a,n,i,r){var o={data:r||{},id:t,template:a,class:n,export:i,enabled:!0};if(Rt.trigger("rendertemplate",[o]),o.enabled){var s=document.getElementById(a).content;if(s.querySelectorAll("slot").forEach((function(e){var t=document.getElementById(e.name);t&&t.content?e.replaceWith(t.content):e.remove()})),ew.useJsRender&&e.views){var l=s.textContent;if(l.includes("{{")&&l.includes("}}")){var d=document.createElement("div");d.appendChild(s);var c=d.innerHTML,u=e.templates(c);document.getElementById(t).innerHTML=u.render(o.data,ew.jsRenderHelpers)}else document.getElementById(t).appendChild(s)}else document.getElementById(t).appendChild(s)}i&&"print"!=i&&e((function(){var a=e("meta[http-equiv='Content-Type']"),n="<html><head>",r=e("#"+t);r.children(0).is("div[id^=ct_]")&&(r=r.children(0)),a[0]&&(n+="<meta http-equiv='Content-Type' content='"+a.attr("content")+"'>"),n+="pdf"==i?"<link rel='stylesheet' type='text/css' href='"+ew.PDF_STYLESHEET_FILENAME+"'>":"<style>"+e.ajax({async:!1,type:"GET",url:ew.PROJECT_STYLESHEET_FILENAME}).responseText+"</style>",n+="</head><body>",e(".ew-chart-top").each((function(){n+=e(this).html()})),n+=r.html(),e(".ew-chart-bottom").each((function(){n+=e(this).html()})),n+="</body></html>";var s=za(),l={customexport:i,data:n,filename:o.class};if(l[ew.TOKEN_NAME]=ew.ANTIFORGERY_TOKEN,"email"==i){var d=Dt.searchParams.toString()+"&"+e.param(l);e.post(s,d,(function(e){dn(e)}))}else zt(s,l);window.location!=window.parent.location&&window.parent.jQuery&&window.parent.jQuery("body").css("cursor","default")}))},toggleGroup:function(t){for(var a,n=e(t),i=n.closest("tr"),r="tr",o=1;o<=6;o++){var s=1==o?"":"-"+o,l=i.data("group"+s);e.isValue(l)&&(a=o,""!=l&&(r+="[data-group"+s+"='"+String(l).replace(/'/g,"\\'")+"']"))}n.hasClass("icon-collapse")?(e(r).slice(1).addClass("ew-rpt-grp-hide-"+a),n.toggleClass("icon-expand icon-collapse")):(e(r).slice(1).removeClass("ew-rpt-grp-hide-"+a),n.toggleClass("icon-expand icon-collapse"))},showTemplates:function(t){e("script"+(t?"."+t:"")+"[type='text/html']").each((function(){var t=e(this),a=t.html().match(/^\s*(<(td|th)[\s\S]*>[\s\S]*<\/\2>)\s*$/i);a?t.next().before(a[1]):e(this).after(e("<span></span>").addClass(t.attr("class")).html(t.html())),t.closest(".ew-table, .ew-view-table, .ew-grid").removeClass("d-none").show()}))},convertToBool:aa,valueChanged:function(t,a,n,i){var r=ba("x"+a+"_"+n,t),o=ya("o"+a+"_"+n,t),s=ya("fn_x"+a+"_"+n,t);if(!o&&(!r||e.isArray(r)&&0==r.length))return!1;var l=function(e){return Sa(e).join()};if(o&&r)if(i){if(aa(l(o))===aa(l(r)))return!1}else if(l(o)==l(s||r))return!1;return!0},setLanguage:function(t){var a=e(t),n=a.val()||a.data("language");if(n){var i=new URLSearchParams;Dt.searchParams.forEach((function(e,t){i.append(t,ew.sanitize(e))})),i.set("language",ew.sanitize(n)),Dt.search=i.toString(),window.location=Dt.toString()}},submitAction:function(t,a){var n=t.target||t.srcElement,i=e(n),r=a.f||i.closest("form")[0]||currentForm,o=e(r),s=a.key,l=a.action,d=a.url||za(),c=a.msg,u=a.data,p=a.success,f=!a.method||_a(a.method[0],"p"),h=!a.select&&!a.key||a.select&&_a(a.select[0],"m");if(h&&!o[0])return!1;if(h&&!ua(o[0]))return Jt('<p class="text-danger">'+ew.language.phrase("NoRecordSelected")+"</p>"),!1;var g=function(e){dn(e)},m=function(){if(f){if(l&&e("<input>").attr({type:"hidden",name:"useraction",value:l}).appendTo(o),e.isObject(u))for(var t in u){var a=o.find("input[type=hidden][name='"+t+"']");a[0]?a.val(u[t]):e("<input>").attr({type:"hidden",name:t,value:u[t]}).appendTo(o)}if(!h&&e.isObject(s))for(var t in s)e("<input>").attr({type:"hidden",name:t,value:s[t]}).appendTo(o);o.prop("action",d).submit(),l&&o.find("input[type=hidden][name=useraction]").remove()}else u=e.isObject(u)?e.param(u):e.isString(u)?u:"",l&&(u+="&useraction="+l+"&ajax="+l),h?u+="&"+o.find("input[name='key_m[]']:checked").serialize():s&&(u+="&"+(e.isObject(s)?e.param(s):s)),p&&e.isString(p)&&(p=window[p]),e.isFunction(p)?e.post(d,u,p):e.isObject(p)?(p.data=u,p.method=p.method||"POST",p.success=p.success||g,e.ajax(d,p)):e.post(d,u,g)};return c?Jt(c,(function(e){e&&m()})):m(),!1},export:na,removeSpaces:function(e){return/^(<(p|br)\/?>(&nbsp;)?(<\/p>)?)?$/i.test(e.replace(/\s/g,""))?"":e},isHiddenTextArea:ia,isModalLookup:ra,isAutoSuggest:oa,getAutoSuggest:sa,alert:la,onError:function(e,t,a){if(t.jquery){var n=t.attr("type");t="checkbox"==n||"radio"==n?t.get():t[0]}if(la(a,(function(){da(t)})),e)if(e.multiPage)e.multiPage.gotoPageByElement(t);else if(e.$element.is("div")){var i=e.$element.closest(".tab-pane");i[0]&&!i.hasClass("active")&&i.closest(".tabbable, .ew-nav-tabs").find("a[data-toggle=tab][href='#"+i.attr("id")+"']").click()}return!1},setFocus:da,hasValue:ca,sort:function(e,t,a){return 2==a&&e.ctrlKey&&(t+="&ctrl=1"),location=t,!0},confirmDelete:function(e){return ma(e),Jt(ew.language.phrase("DeleteConfirmMsg"),(function(t){t&&e.href?window.location=e.href:ga(e)})),!1},keySelected:ua,selectAllKey:function(t){pa(t);var a=e(t).closest(".ew-table")[0];a&&e(a.tBodies).each((function(){e(this.rows).each((function(a,n){var i=e(n);i.is(":not(.ew-template):not(.ew-table-preview-row)")&&(i.data({selected:t.checked,checked:t.checked}),fa(a,n))}))}))},selectAll:pa,updateSelected:function(t){return e(t).find("input[type=checkbox][name^=u_]:checked,input:hidden[name^=u_][value=1]").length>0},setColor:fa,clearSelected:ha,clearDelete:ga,clickDelete:ma,clickMultiCheckbox:function(t){var a=t.target||t.srcElement,n=e(a),i=n.closest(".ew-table")[0];if(i){ha(i);var r=n.closest(".ew-table > tbody > tr");r.siblings("[data-rowindex='"+r.data("rowindex")+"']").addBack().each((function(t,n){e(n).data("checked",a.checked).data("selected",a.checked).find("input[type=checkbox][name='key_m[]']").each((function(){this!=a&&(this.checked=a.checked)})),fa(0,n)})),t.stopPropagation()}},setupTable:wa,setupGrid:va,addGridRow:function(t){var a=e(t).closest(".ew-grid"),n=a.find("table.ew-table").last(),i=n.parent("div"),r=n.find("tr.ew-template");if(!(t&&a[0]&&n[0]&&r[0]))return!1;var o=e(n[0].rows).last();n.find("td.ew-table-last-row").removeClass("ew-table-last-row");var s=r.clone(!0,!0).removeClass("ew-template"),l=a.find("div.ew-form[id^=f][id$=grid]");l[0]||(l=a.find("form.ew-form[id^=f][id$=list]"));var d=l.is("div")?"_"+l.attr("id"):"",c=l.find("#key_count"+d),u=parseInt(c.val(),10)+1;s.attr({id:"r"+u+s.attr("id").substring(2),"data-rowindex":u});var p=r.find("script:contains('$rowindex$')");s.children("td").each((function(){e(this).find("*").each((function(){e.each(this.attributes,(function(e,t){t.value=t.value.replace(/\$rowindex\$/g,u)}))}))})),s.find(".ew-icon").closest("a, button").removeData("bs.tooltip").tooltip({container:"body",placement:"bottom",trigger:"hover",sanitizeFn:ew.sanitizeFn}),c.val(u).after(e("<input>").attr({type:"hidden",id:"k"+u+"_action"+d,name:"k"+u+"_action"+d,value:"insert"})),o.after(s),p.each((function(){Fa(this.text.replace(/\$rowindex\$/g,u))}));var f=l.data("form");return f&&(f.initEditors(),f.initUpload()),wa(-1,n[0],!0),i.scrollTop(i[0].scrollHeight),!1},deleteGridRow:function(t,a){var n=e(t).tooltip("hide").removeData("bs.tooltip"),i=n.closest(".ew-grid, .ew-multi-column-grid"),r=n.closest("tr, div[data-rowindex]"),o=r.closest(".ew-table");if(!t||!i[0]||!r[0])return!1;var s=parseInt(r.data("rowindex"),10),l=i.find("div.ew-form[id^=f][id$=grid]");l[0]||(l=i.find("form.ew-form[id^=f][id$=list]"));var d=l.data("form");if(!l[0]||!d)return!1;var c=l.is("div")?"_"+l.attr("id"):"",u="#key_count"+c,p=(l.find(u),function(){if(r.remove(),i.is(".ew-grid")&&wa(-1,o[0],!0),s>0){var t=l.find("#k"+s+"_action"+c);t[0]?t.val("insert"==t.val()?"insertdelete":"delete"):l.find(u).after(e("<input>").attr({type:"hidden",id:"k"+s+"_action"+c,name:"k"+s+"_action"+c,value:"delete"}))}});return e.isFunction(d.emptyRow)&&d.emptyRow(a)?p():Jt(ew.language.phrase("DeleteConfirmMsg"),(function(e){e&&p()})),!1},htmlEncode:function(e){var t=String(e);return t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")},clearForm:function(t){e(t).find("[id^=x_],[id^=y_],[id^=n_]").each((function(){"checkbox"==this.type||"radio"==this.type?this.checked=!1:"select-one"==this.type?this.selectedIndex=0:"select-multiple"==this.type?e(this).find("option").prop("selected",!1):("text"==this.type||"textarea"==this.type||"hidden"==this.type&&oa(this))&&(this.value="","hidden"==this.type&&(sa(this).input.value=""))}))},getElements:ba,getElement:ya,getAncestorBy:Ea,isHidden:function(t){return"none"==e(t).css("display")&&!e(t).closest(".dropdown-menu")[0]&&!ra(t)&&!oa(t)&&!ia(t)||null!=Ea(t,(function(t){var a=e(t);return"none"==a.css("display")&&!a.hasClass("tab-pane")&&!a.hasClass("collapse")}))},sameText:_a,sameString:function(e,t){return String(e)==String(t)},getOptionValues:Sa,getOptionTexts:xa,clearOptions:Oa,getId:Aa,valueSeparator:Ia,displayValue:Pa,optionHtml:Ca,optionsHtml:ka,newOption:Ra,renderOption:Na,selectOption:Ma,executeScript:La,stripScript:ja,addScript:Fa,removeScript:$a,getContent:Ua,getOptions:Ha,addOptionDialogShow:function(t){var a=ew.addOptionDialog||e("#ew-add-opt-dialog").on("hidden.bs.modal",(function(){$a(a.data("args").el);var e=a.removeData("args").find(".modal-body form").data("form");e&&e.destroyEditor(),a.find(".modal-body").html(""),a.find(".modal-footer .btn-primary").unbind(),a.data("showing",!1)}));if(a[0]){if(!a.data("showing")){a.data("showing",!0);var n=function(t){var n=t,i=Lt((T=a.data("args")).lnk),r=a.find(".modal-body form input[name='"+ew.API_OBJECT_NAME+"']").val(),o=/^x(\d+)_/,s=(P=T.el).match(o),l=s?s[0]:"x_",d=s?s[1]:-1,c=P.replace(o,"x_");i.lists[c];if(e.isString(t)&&(n=Xt(t)),n&&n.success&&n[r]){var u=n[r];a.modal("hide");var p=i.$element[0],f=ba(P,p);if(f){c=P.replace(o,"x_");for(var h=i.lists[c].linkField,g=i.lists[c].displayFields.slice(),m=i.lists[c].filterFields.slice(),w=i.lists[c].parentFields.slice(),v=0,b=w.length;v<b;v++){1==(O=w[v].split(" ")).length&&(w[v]=w[v].replace(/^x_/,l))}var y=""!=h?u[h]:"",E={lf:y};for(v=0,b=g.length;v<b;v++)g[v]in u&&(E["df"+(v||"")]=u[g[v]]);for(v=0,b=m.length;v<b;v++)m[v]in u&&(E["ff"+(v||"")]=u[m[v]]);if(y&&g.length>0&&E.df){var _=Aa(P,!1),S=_.replace(new RegExp("^"+l),"x_");if(null===i.lists[S].ajax)(O=i.lists[S].options).push(E);var x=[];for(v=0,b=w.length;v<b;v++)x.push(Sa(w[v],p));var T={data:E,parents:x,valid:!0,name:Aa(f),form:p};if(Rt.trigger("addoption",[T]),T.valid){var O=Ha(f),A=[];!f.options&&f.length&&(A=Sa(f),Ta(f).find("div").first().empty());var I=Ra(f,E,p);if(f.options)f.options[f.options.length-1].selected=!0,e(f).change().focus();else if(f.length){var P;if(Na(f),f=ba(_,p),A.length>0&&Ma(f,A),f.length>0)"checkbox"!=(P=e(f).filter("[value!='{value}']").last()[0]).type&&"radio"!=P.type||P.click(),P.focus()}else if(oa(f)){var C=sa(f);e(f).val(y).change(),e(C.input).val(I).focus()}else if(ra(f)){var k=e(f),R=e(ya("lu_"+T.name,p));if(k.data("multiple")){var N=e(f).val(),M=(A=[],String(y));if(""!==N&&(A=N.split(ew.MULTIPLE_OPTION_SEPARATOR)),!A.includes(M)){A.push(M),k.val(A.join()).change();var D=R.html(),L=R.find(".ew-option").map((function(){return e(this).html()})).get();L.length?(L.push(I),R.html(ka(L,k.data("maxcount")))):D==ew.language.phrase("PleaseSelect")?R.html(Ca(I)):D&&R.html(ew.language.phrase("CountSelected").replace("%s",A.length))}}else k.val(y).change(),R.html(I)}var j=e(p),F=j.is("div")?"_"+j.attr("id"):"",$=j.find("#key_count"+F).val();if($>0)for(v=1;v<=$;v++)if(v!=d){var U=ba(c.replace(/^x/,"x"+v),p),H=Ha(U);A=[];JSON.stringify(O)==JSON.stringify(H)&&(!U.options&&U.length&&(A=Sa(U)),Ra(U,E,p),!U.options&&U.length&&(Na(U),A.length>0&&Ma(U,A)))}}}}}else{var Y,B=a.find("div.ew-message-dialog").html(""),K=e("<div></div>").html(t).find("div.ew-message-dialog");K[0]?Y=K.html():((Y=n&&n.failureMessage?n.failureMessage:t)&&""!=String(Y).trim()||(Y=ew.language.phrase("InsertFailed")),Y='<p class="text-danger">'+Y+"</p>"),B.html(Y).show()}},i=function(e){a.modal("hide"),la("Server Error "+e.status+": "+e.statusText)},r=function(t){var a=ew.addOptionDialog.find(".modal-body form")[0],r=Mt[a.id],o=t?t.target:null;return o&&(r.enableForm=function(){e(o).prop("disabled",!1).removeClass("disabled")},r.disableForm=function(){e(o).prop("disabled",!0).addClass("disabled")}),r.canSubmit()&&e.post(Yt(ew.API_ADD_ACTION),e(a).serialize(),n).fail(i).always((function(){r.enableForm()})),!1};a.modal("hide"),a.data("args",t);e.get(t.url,(function(n){var i=Lt(t.lnk),o="x_",s=t.el.match(/^(x\d+_)/);s&&(o=s[1]);for(var l=t.el.replace(o,"x_"),d=i.lists[l].parentFields.slice(),c=i.lists[l].filterFieldVars.slice(),u=i._form,p=[],f=[],h=0,g=d.length;h<g;h++){1==d[h].split(" ").length&&(d[h]=d[h].replace(/^x_/,o))}for(h=0,g=d.length;h<g;h++)p.push(Sa(d[h],u)),f.push(xa(d[h],u));if(a.find(".modal-title").html(e(t.lnk).closest(".ew-add-opt-btn").data("title")),a.find(".modal-body").html(ja(n)),u=a.find(".modal-body form")[0]){e(u).keypress((function(e){if(13==e.which&&"TEXTAREA"!=e.target.nodeName)return r()}));for(h=0,g=p.length;h<g;h++){if((w=ba(c[h],u))&&(w.options||w.length)){var m=p[h];Rt.one("updatedone",(function(t,a){var n,i,r=a.target;(w==r||(n=w,i=r,e.isArray(n)&&e.isArray(i)&&n[0]&&i[0]&&n.name==i.name&&n.form==i.form))&&Ma(r,m)}))}}}if(ew.addOptionDialog=a.modal("show"),a.find(".modal-footer .btn-primary").click(r).focus(),La(n,t.el),u)for(h=0,g=p.length;h<g;h++){var w;if(w=ba(c[h],u))if(oa(w)){w.value=p[h][0];var v=sa(w);v.input.value=f[h][0],v._options.push({val:p[h][0],lbl:f[h][0]})}else ra(w)?(w.value=p[h][0],Zt.call(Mt[u.id],w)):w.options||w.length||(w.value=p[h][0])}a.trigger("load.ew")})).fail(i)}}else la("DIV #ew-add-opt-dialog not found.")},modalDialogHide:Ya,modalDialogShow:function(t){e(t.lnk).tooltip("hide");var a=t.f;if(a&&!ua(a))return Jt('<p class="text-danger">'+ew.language.phrase("NoRecordSelected")+"</p>"),!1;var n=ew.modalDialog||e("#ew-modal-dialog").on("hidden.bs.modal",Ya);if(n.data("showing")&&n.data("url")==t.url)return!1;n.data({showing:!0,url:t.url}),t.reload=!1,"modal-sm"===t.size?n.find(".modal-dialog").toggleClass("modal-sm",!0).toggleClass("modal-lg modal-xl",!1):""===t.size?n.find(".modal-dialog").toggleClass("modal-sm modal-lg modal-xl",!1):"modal-lg"===t.size?n.find(".modal-dialog").toggleClass("modal-lg",!0).toggleClass("modal-sm modal-xl",!1):n.find(".modal-dialog").toggleClass("modal-xl",!0).toggleClass("modal-sm modal-lg",!1);var i=function(){var t=n.data("args"),a=e(t.lnk);return t.caption||a.data("caption")||a.data("original-title")||""},r=function(){var t=n.data("args");return e.isNull(t.btn)?"":t.btn&&""!=t.btn?ew.language.phrase(t.btn):i()},o=function(e){n.modal("hide"),e.status&&la("Server Error "+e.status+": "+e.statusText)},s=function(e){Nt.css("cursor","default")},l=function(t){var a=Xt(t);if(e.isObject(a)){var i=a.url;if(a.modal&&!function(t){var a=e("<a>",{href:t})[0];return window.location.pathname.endsWith(a.pathname)}(i)){var l=n.data("args");l.reload=!0,a.caption&&(l.caption=a.caption),l.btn=a.view?null:"",n.data("args",l),i+=(i.split("?").length>1?"&":"?")+"modal=1&rnd="+cn(),Nt.css("cursor","wait"),e.ajax(i).done(c).fail(o).always(s)}else n.modal("hide"),window.location=i}else{var u=Ua(t),p=n.find(".modal-body").html(u),f="",h=p.find("#confirm"),g=p.find("#conflict");if(g&&"1"==g.val())f+='<button type="button" id="btn-overwrite" class="btn btn-primary ew-btn">'+ew.language.phrase("OverwriteBtn")+"</button>",f+='<button type="button" id="btn-reload" class="btn btn-default ew-btn">'+ew.language.phrase("ReloadBtn")+"</button>",f+='<button type="button" class="btn btn-default ew-btn" data-dismiss="modal">'+ew.language.phrase("CancelBtn")+"</button>",n.find(".modal-footer").html(f),n.find(".modal-footer #btn-overwrite").on("click",{action:"overwrite"},d),n.find(".modal-footer #btn-reload").on("click",{action:"show"},d);else if(h&&"confirm"==h.val())f+='<button type="button" class="btn btn-primary ew-btn">'+ew.language.phrase("ConfirmBtn")+"</button>",f+='<button type="button" class="btn btn-default ew-btn">'+ew.language.phrase("CancelBtn")+"</button>",n.find(".modal-footer").html(f),n.find(".modal-footer .btn-primary").click(d).focus(),n.find(".modal-footer .btn-default").on("click",{action:"cancel"},d);else{var m=r();m&&(f+='<button type="button" class="btn btn-primary ew-btn">'+m+"</button>"),f+='<button type="button" class="btn btn-default ew-btn" data-dismiss="modal">'+ew.language.phrase("CancelBtn")+"</button>",n.find(".modal-footer").html(f),n.find(".modal-footer .btn-primary").addClass("ew-submit").click(d).focus()}La(t,"ModalDialog"),n.trigger("load.ew")}},d=function(t){var a=n.find(".modal-body form")[0],i=e(a),r=Mt[a.id],d=t&&t.data?t.data.action:null,u=t?t.target:null;u&&(r.enableForm=function(){e(u).prop("disabled",!1).removeClass("disabled")},r.disableForm=function(){e(u).prop("disabled",!0).addClass("disabled")});var p=a.elements.action;return d&&p&&(p.value=d),"cancel"==d?e.post(i.attr("action"),i.serialize(),c).fail(o).always(s):r.canSubmit()&&e.post(i.attr("action"),i.serialize(),l).fail(o),!1};n.modal("hide"),n.data("args",t);var c=function(t){var a=Xt(t);if(e.isObject(a))a.error&&la(a.error);else{var o=n.data("args"),s=(e(t),e(o.lnk));n.find(".modal-title").html(i());var l="",c=r();c&&(l+='<button type="button" class="btn btn-primary ew-btn">'+c+"</button>"),""!=l?l+='<button type="button" class="btn btn-default ew-btn" data-dismiss="modal">'+ew.language.phrase("CancelBtn")+"</button>":l='<button type="button" class="btn btn-default ew-btn" data-dismiss="modal">'+ew.language.phrase("CloseBtn")+"</button>",n.find(".modal-footer").html(l);var u=Ua(t);n.find(".modal-body").html(u),n.find(".modal-body form").keypress((function(e){if(13==e.which&&"TEXTAREA"!=e.target.nodeName)return d()})),ew.modalDialog=n.modal("show"),n.find(".modal-dialog").addClass("table-"+s.data("table")),n.find(".modal-footer .btn-primary").addClass("ew-submit").click(d).focus(),La(t,"ModalDialog"),n.trigger("load.ew")}};Nt.css("cursor","wait");var u=t.url;if(a){var p=e(a);a.elements.modal||e("<input>").attr({type:"hidden",name:"modal",value:"1"}).appendTo(p),e.post(u,p.serialize(),c).fail(o).always(s)}else u+=(u.split("?").length>1?"&":"?")+"modal=1&rnd="+cn(),e.get(u,c).fail(o).always(s);return!1},modalLookupShow:function(t){var a=t.el,n=Qt(t.lnk);if(n&&a){var i=ew.modalLookupDialog||e("#ew-modal-lookup-dialog").on("hidden.bs.modal",Ya);if(i[0]){if(!i.data("showing")){i.data("showing",!0);Aa(a,!0);var r,o,s=e(n).find("[id='"+a+"']"),l=i.find(".modal-body"),d=e(t.lnk),c=d.closest(".ew-lookup-list").find(".ew-lookup-text").focus(),u=Aa(a,!1),p=u.match(/^([xy])(\d*)_/),f=(p&&p[1],p?p[2]:""),h=u.replace(/^([xy])(\d*)_/,"x_"),g=Mt[n.id].lists(h),m=function(t){return"OK"==t.result&&e.isArray(t.records)&&t.records.forEach((function(a,n){var i;e.isArray(a)?i={lf:a[0],df1:a[1],df2:a[2],df3:a[3],df4:a[4]}:e.isObject(a)&&(i={lf:a.lf,df1:a.df,df2:a.df2,df3:a.df3,df4:a.df4});var r=Pa(a,s);g.template?i.df=g.template.render(i,ew.jsRenderHelpers):i.df=r,i.txt=r,t.records[n]=i})),t},w=function(e,t){if(oa(s)){var a=sa(s[0]);a._options.push({val:e,lbl:t}),a.input.value=t}},v=function(){return function(a){var i=[],r=[],o=[],d=[],p=!t.m&&t.srch;if(l.ewjtable("selectedRows").each((function(){var t=e(this).data("record");i.push(t.lf),r.push(t.df),o.push(t.df),d.push(t.txt)})),a.sort().join()===i.sort().join())c.html(ka(o,s.data("maxcount"))),w(i.join(),d.join(", ")),s.val(p?r.join(", "):i.join()).change();else{var f=Object.assign({page:g.page,field:g.field,ajax:"modal",keys:a},ta("#p_"+u,n));Nt.css("cursor","wait"),e.ajax(Yt(ew.API_LOOKUP_ACTION),{type:"POST",dataType:"json",data:f}).done(m).then((function(t){if("OK"==t.result&&e.isArray(t.records)){for(var a=[],n=[],i=[],r=[],o=t.records,l=0,d=o.length;l<d;l++){var u=o[l];a.push(u.lf),n.push(u.df),i.push(u.df),r.push(u.txt)}c.html(ka(i,s.data("maxcount"))),w(a.join(),r.join(", ")),s.val(p?n.join(", "):a.join()).change()}})).always((function(){Nt.css("cursor","default")}))}}(E),i.modal("hide"),!1};i.modal("hide"),i.data("args",t);var b=[],y=s.val(),E=""!==y?y.split(ew.MULTIPLE_OPTION_SEPARATOR):[],_=Object.assign({page:g.page,field:g.field},ta("#p_"+u,n)),S=g.parentFields.slice();if(""!=f)for(var x=0,T=S.length;x<T;x++){1==S[x].split(" ").length&&(S[x]=S[x].replace(/^x_/,"x"+f+"_"))}if(S.length>0)for(x=0,T=S.length;x<T;x++)b.push(Sa(S[x],n));x=0;for(var O=b.length;x<O;x++)_["v"+(x+1)]=b[x].join(ew.MULTIPLE_OPTION_SEPARATOR);Nt.css("cursor","wait"),l.ewjtable({paging:!0,pageSize:t.n,pageSizes:[],pageSizeChangeArea:!1,pageList:"minimal",selecting:!0,selectingCheckboxes:!0,multiselect:!!t.m,actions:{listAction:function(t,a){var n=Object.assign({},_,{ajax:"modal",start:a.start,recperpage:a.recperpage});return e.isObject(t)&&Object.assign(n,t),e.ajax(Yt(ew.API_LOOKUP_ACTION),{type:"POST",dataType:"json",data:n}).done(m).always((function(){Nt.css("cursor","default")}))}},messages:{serverCommunicationError:ew.language.phrase("ServerCommunicationError"),loadingMessage:'<div class="'+ew.spinnerClass+' m-3 ew-loading" role="status"><span class="sr-only">'+ew.language.phrase("Loading")+"</span></div>",noDataAvailable:ew.language.phrase("NoRecord"),close:ew.language.phrase("CloseBtn"),pagingInfo:ew.language.phrase("Record")+" {0}-{1} "+ew.language.phrase("Of")+" {2}",pageSizeChangeLabel:ew.language.phrase("RecordsPerPage"),gotoPageLabel:ew.language.phrase("Page")},fields:{lf:{key:!0,list:!1},df:{}},recordsLoaded:function(t,a){var n=e(t.target).find(".ewjtable-data-row").filter((function(){return E.includes(String(e(this).data("record-key")))}));e(t.target).ewjtable("selectRows",n)},selectionChanged:function(a,n){var i=n.rows;i&&(t.m||(E=[]),i.each((function(){var t=e(this),a=String(t.data("record-key")),n=E.indexOf(a),i=t.hasClass("ewjtable-row-selected");i&&-1==n?E.push(a):!i&&n>-1&&E.splice(n,1)})))}}).ewjtable("load",null,(function(t){"OK"==t.result?(i.find(".modal-title").html(d.attr("title")||d.data("original-title")),i.find(".modal-footer").html('<button type="button" id="btn-select" class="btn btn-primary ew-btn">'+ew.language.phrase("SelectBtn")+'</button><button type="button" class="btn btn-default ew-btn" data-dismiss="modal">'+ew.language.phrase("CancelBtn")+"</button>"),o=e('<input type="search" name="sv" class="form-control mb-2" placeholder="'+ew.language.phrase("Search")+'">').prependTo(l).on("keyup",(function(t){r&&r.cancel(),r=e.later(ew.LOOKUP_DELAY,null,(function(){l.ewjtable("load",{sv:o.val()})}))})),i.find(".modal-footer #btn-select").click(v),ew.modalLookupDialog=i.modal("show"),i.find("[name=sv]").focus()):la(t.message)}))}}else la("DIV #ew-modal-lookup-dialog not found.")}},importDialogShow:function(t){e(t.lnk).tooltip("hide");var a=ew.importDialog||e("#ew-import-dialog");if(!a[0])return la("DIV #ew-import-dialog not found."),!1;var n,i=a.find("#importfiles"),r=a.find(".modal-body"),o=r.find(":input[id!=importfiles]"),s=r.find(".message"),l=r.find(".progress"),d=function(t,n){$msg=e("<div>"+t+"</div>"),n&&$msg.addClass(n),s.removeClass("d-none").html($msg),"text-danger"==n&&a.find(".modal-footer .btn").prop("disabled",!1)},c=function(){s.addClass("d-none").html("")},u=function(e,t){l.removeClass("d-none").find(".progress-bar").removeClass("bg-success bg-info").addClass(t||"bg-success").attr("aria-valuenow",e).css("width",e+"%").html(e+"%")},p=function(e){try{var t=parseInt(e.count),n=parseInt(e.totalCount),i=e.file;if(n>0&&a.find(".modal-footer .ew-close-btn").data("import-progress")){var r=parseInt(100*t/n);u(r),d(ew.language.phrase("ImportMessageProgress").replace("%t",n).replace("%c",t).replace("%f",i),"text-info")}}catch(e){}},f=function(){var t=Yt(ew.API_PROGRESS_ACTION),a={rnd:cn()};a[ew.API_FILE_TOKEN_NAME]=i.data(ew.API_FILE_TOKEN_NAME),e.get(t,a,p,"json")},h=function(t){var n="";u(100);var i=t.files;if(a.find(".modal-footer .ew-close-btn").data("import-progress",!1),e.isArray(i))for(var r=0,o=i.length;r<o;r++){var s=i[r],c=s.totalCount||0,p=s.count||0,f=s.successCount||0,h=s.failCount||0;if(""!=n&&(n+="<br>"),s.success)n+=ew.language.phrase("ImportMessageSuccess").replace("%t",c).replace("%c",p).replace("%f",s.file);else{n+=ew.language.phrase("ImportMessageError1").replace("%t",c).replace("%c",p).replace("%f",s.file).replace("%s",f).replace("%e",h),s.error&&(n+=ew.language.phrase("ImportMessageError2").replace("%e",s.error));var g=!0;if(s.failList){var m=0;for(r=1;r<=p&&(s.failList["row"+r]&&(m+=1,n+="<br>"+ew.language.phrase("ImportMessageError3").replace("%i",r).replace("%d",s.failList["row"+r])),!(m>=5));r++);h>5?n+="<br>"+ew.language.phrase("ImportMessageMore").replace("%s",h-5):g=!1}s.log&&g&&(n+="<br>"+ew.language.phrase("ImportMessageError4").replace("%l",s.log)),d(n,"text-danger")}}t.success?(d(n,"text-success"),a.find(".modal-footer .ew-close-btn").data("imported",!0)):(t.error&&(n=t.error),d(n,"text-danger")),l.addClass("d-none").find(".progress-bar").attr("aria-valuenow",0).css("width","0%").html("0%")},g=function(e){a.find(".modal-footer .ew-close-btn").data("import-progress",!1),d(ew.language.phrase("ImportMessageServerError").replace("%s",e.status).replace("%t",e.statusText),"text-danger")},m={session:ew.SESSION_ID};m[ew.TOKEN_NAME_KEY]=ew.TOKEN_NAME,m[ew.ANTIFORGERY_TOKEN_KEY]=ew.ANTIFORGERY_TOKEN;var w=ew.importUploadOptions;return w.acceptFileTypes||(w.acceptFileTypes=new RegExp("\\.("+ew.IMPORT_FILE_ALLOWED_EXT.replace(/,/g,"|")+")$","i")),i.data("blueimpFileupload")||i.fileupload(Object.assign({url:Yt(ew.API_UPLOAD_ACTION),dataType:"json",autoUpload:!0,formData:m,singleFileUploads:!1,messages:{acceptFileTypes:ew.language.phrase("UploadErrMsgAcceptFileTypes"),maxFileSize:ew.language.phrase("UploadErrMsgMaxFileSize"),maxNumberOfFiles:ew.language.phrase("UploadErrMsgMaxNumberOfFiles"),minFileSize:ew.language.phrase("UploadErrMsgMinFileSize")},done:function(t,r){if(r.result&&r.result.files&&e.isArray(r.result.files.importfiles)){var s=!0;r.result.files.importfiles.forEach((function(e,t){e.error&&(d(ew.language.phrase("ImportMessageUploadError").replace("%f",e.name).replace("%s",e.error),"text-danger"),s=!1)})),s&&function(t){Nt.css("cursor","wait"),i.data(ew.API_FILE_TOKEN_NAME,t),a.find(".modal-footer .ew-close-btn").data("import-progress",!0);var r=ew.API_ACTION_NAME+"=import&"+ew.API_FILE_TOKEN_NAME+"="+encodeURIComponent(t);o.length&&(r+="&"+o.serialize()),e.ajax(za(),{data:r,method:"POST",dataType:"json",beforeSend:function(t,a){n=e.later(100,null,f,null,!0)}}).done(h).fail(g).always((function(){Nt.css("cursor","default"),n&&n.cancel()}))}(r.result[ew.API_FILE_TOKEN_NAME])}},change:function(e,t){c()},processfail:function(e,t){t.files.forEach((function(e,t){e.error&&d(ew.language.phrase("ImportMessageUploadError").replace("%f",e.name).replace("%s",e.error),"text-danger")}))},fail:function(e,t){d(ew.language.phrase("ImportMessageServerError").replace("%s",t.textStatus).replace("%t",t.errorThrown),"text-danger")},progressall:function(e,t){!function(e){var t=parseInt(100*e.loaded/e.total);u(t,"bg-info"),d(100===t?ew.language.phrase("ImportMessageUploadComplete"):ew.language.phrase("ImportMessageUploadProgress").replace("%p",t),"text-info")}(t)}},w)),a.modal("hide").find(".modal-title").html(t.hdr),a.find(".modal-footer .ew-close-btn").off("click.ew").on("click.ew",(function(){var t=e(this);t.data("imported")&&(t.data("imported",!1),window.location.reload(!0))})),c(),ew.importDialog=a.modal("show"),!1},autoFill:Ba,tooltip:Ka,emailDialogShow:function(t){var a=ew.emailDialog||e("#ew-email-dialog");if(!a[0])return la("DIV #ew-email-dialog not found."),!1;if(t.sel&&!ua(t.f))return la(ew.language.phrase("NoRecordSelected")),!1;var n=a.find(".modal-body form"),i=n.data("form");return i||((i=new kt(n.attr("id"))).validate=function(){var e,t=this.getForm();return(e=t.elements.sender)&&!ca(e)?this.onError(e,ew.language.phrase("EnterSenderEmail")):e&&!sn(e.value,1)?this.onError(e,ew.language.phrase("EnterProperSenderEmail")):(e=t.elements.recipient)&&!ca(e)?this.onError(e,ew.language.phrase("EnterRecipientEmail")):e&&!sn(e.value,ew.MAX_EMAIL_RECIPIENT)?this.onError(e,ew.language.phrase("EnterProperRecipientEmail")):(e=t.elements.cc)&&!sn(e.value,ew.MAX_EMAIL_RECIPIENT)?this.onError(e,ew.language.phrase("EnterProperCcEmail")):(e=t.elements.bcc)&&!sn(e.value,ew.MAX_EMAIL_RECIPIENT)?this.onError(e,ew.language.phrase("EnterProperBccEmail")):!((e=t.elements.subject)&&!ca(e))||this.onError(e,ew.language.phrase("EnterSubject"))},i.submit=function(){if(!this.validate())return!1;var i=n.serialize(),r="";t.f&&t.sel&&(r=e(t.f).find("input[type=checkbox][name='key_m[]']:checked").serialize()),t.key&&(i+="&"+e.param(t.key));var o=this.getForm();return t.url?(a.modal("hide"),t.exportid?ew.exportWithCharts(t.el,t.url,t.exportid,o):na(t.f,t.url,"email",!0,t.sel,o)):e.post(e(t.f).attr("action"),i+"&"+r,(function(e){dn(e)})),!0},n.data("form",i)),a.modal("hide").find(".modal-title").html(t.hdr),a.find(".modal-footer .btn-primary").unbind().click((function(e){e.preventDefault(),i.submit()&&a.modal("hide")})),ew.emailDialog=a.modal("show"),!1},showDrillDown:function(t,a,n,i,r){if(t&&t.ctrlKey){var o=n.split("?"),s=new URLSearchParams(o[1]);return s.set("d","2"),ew.redirect(o[0]+"?"+s.toString()),!1}var l=e.isString(a)?e("#"+a):e(a),d=l.data("drilldown-placement")||(l.hasClass("ew-chart-canvas")?ew.CSS_FLIP?"left":"right":"bottom");l.tooltip("hide");var c={obj:l[0],id:i,url:n,hdr:r,placement:d};Rt.trigger("drilldown",[c]);var u=c.url.split("?");c.file=u[0]||"",c.data=u[1]||"",l.data("bs.popover")||l.popover({html:!0,placement:c.placement,trigger:"manual",template:'<div class="popover"><h3 class="popover-header d-none" style="cursor: move;"></h3><div class="popover-body"></div></div>',content:'<div class="'+ew.spinnerClass+' m-3 ew-loading" role="status"><span class="sr-only">'+ew.language.phrase("Loading")+"</span></div>",container:e("#ew-drilldown-panel"),sanitizeFn:ew.sanitizeFn,boundary:"viewport"}).on("show.bs.popover",(function(e){l.attr("data-original-title","")})).on("shown.bs.popover",(function(t){if(l.data("args")){var a=l.data("args").data;a+=(a?"&":"")+ew.TOKEN_NAME_KEY+"="+ew.TOKEN_NAME,a+=(a?"&":"")+ew.ANTIFORGERY_TOKEN_KEY+"="+ew.ANTIFORGERY_TOKEN,e.ajax({cache:!1,dataType:"html",type:"POST",data:a,url:l.data("args").file,success:function(t){var a=e(l.data("bs.popover").getTipElement()).on("mousedown",(function(t){var a=e(this).addClass("drag"),n=a.outerHeight(),i=a.outerWidth(),r=a.offset().top+n-t.pageY,o=a.offset().left+i-t.pageX;Nt.on("mousemove",(function(e){var t=e.pageY+r-n,s=e.pageX+o-i;a.hasClass("drag")&&a.offset({top:t,left:s})})).on("mouseup",(function(e){a.removeClass("drag")}))}));c.hdr&&a.find(".popover-header").empty().removeClass("d-none").append('<button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+c.hdr).find(".close").click((function(){l.popover("hide")}));var n=t.match(/<body[^>]*>([\s\S]*?)<\/body\s*>/i);t=n?n[0]:t;var r=ew.stripScript(t);a.find(".popover-body").html(e("<div></div>").html(r).find("#ew-report")).find(".ew-table").each(ew.setupTable),ew.executeScript(t,i),l.popover("update")},error:function(t){t.responseText&&e($el.data("bs.popover").getTipElement()).find(".popover-body").empty().append('<p class="text-danger">'+t.responseText+"</p>")}})}})).on("hidden.bs.popover",(function(t){e.each(ew.drillDownCharts,(function(e,t){t.dispose()})),ew.drillDownCharts={},ew.removeScript(i)})),l.data("args",c).popover("show")},ajax:function(t,a){if(e.isObject(t)){var n=t.action;if(n){delete t.action;var i=Object.assign({},t),r=function(t){if(e.isObject(t)&&"OK"==t.result){var a=t.records;return e.isArray(a)&&1==a.length?(a=a[0],e.isArray(a)&&1==a.length?a[0]:a):a}return t},o=Yt(n);if(i.type=i.type||"POST",!e.isFunction(a)){var s=i.type;delete i.type;var l=e.ajax({url:o,async:!1,type:s,data:i}).responseText;return l=Xt(l),r(l)}i.url=o,i.dataType="json",i.success=function(e){a(r(e))},e.ajax(i)}}},currentPage:za,toggleSearchOperator:function(e,t){var a=this.form.elements[e];a&&(a.value=a.value!=t?t:"=")},checkUSDate:Ga,checkShortUSDate:Wa,checkDate:Va,checkShortDate:qa,checkEuroDate:Xa,checkShortEuroDate:Ja,checkDateDef:function(e){return ew.DATE_FORMAT.match(/^yyyy/)?Va(e):ew.DATE_FORMAT.match(/^yy/)?qa(e):ew.DATE_FORMAT.match(/^m/)&&ew.DATE_FORMAT.match(/yyyy$/)?Ga(e):ew.DATE_FORMAT.match(/^m/)&&ew.DATE_FORMAT.match(/yy$/)?Wa(e):ew.DATE_FORMAT.match(/^d/)&&ew.DATE_FORMAT.match(/yyyy$/)?Xa(e):!(!ew.DATE_FORMAT.match(/^d/)||!ew.DATE_FORMAT.match(/yy$/))&&Ja(e)},checkDateEx:Qa,unformatYear:Za,checkDay:en,checkInteger:function(e){return!e||0==e.length||!e.includes(ew.DECIMAL_POINT)&&tn(e)},checkNumber:tn,stringToFloat:an,stringToDate:function(e){var t=e.replace(/^(\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\d|[3][0|1]) (?:(0\d|1\d|2[0-3]):([0-5]\d):([0-5]\d))?$/,"$1 $2 $3 $4 $5 $6").split(" ");return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])},escapeRegExChars:nn,checkRange:rn,checkTime:on,checkPhone:function(e){return!e||0==e.length||/^\(\d{3}\) ?\d{3}( |-)?\d{4}|^\d{3}( |-)?\d{3}( |-)?\d{4}$/.test(e.trim())},checkZip:function(e){return!e||0==e.length||/^\d{5}$|^\d{5}-\d{4}$/.test(e.trim())},checkCreditCard:function(e){if(!e||0==e.length)return!0;var t=e.replace(/\D/g,"");if(0==t.length)return!1;for(var a,n=t.length%2!=1,i=0,r=0,o=t.length;r<o;r++)a=parseInt(t.charAt(r),10),n?(i+=(a*=2)%10,a/10>=1&&i++,n=!1):(i+=a,n=!0);return i%10==0},checkSsc:function(e){return!e||0==e.length||/^(?!000)([0-6]\d{2}|7([0-6]\d|7[012]))([ -]?)(?!00)\d\d\3(?!0000)\d{4}$/.test(e.trim())},checkEmails:sn,checkEmail:ln,checkGuid:function(e){return!e||0==e.length||/^(\{\w{8}-\w{4}-\w{4}-\w{4}-\w{12}\}|\w{8}-\w{4}-\w{4}-\w{4}-\w{12})$/.test(e.trim())},checkByRegEx:function(e,t){return!e||0==e.length||!!e.match(t)},showMessage:dn,random:cn,upload:function(t){var a=e(t);if(!a.data("blueimpFileupload")){var n=a.attr("name"),i=n.replace(/\$/g,"\\$"),r=a.data("table"),o=a.is("[multiple]"),s=a.closest(".form-group, [id^='el']"),l=a.prop("disabled")||"confirm"==a.closest("form").find("#confirm").val(),d=s.find("#ft_"+i),c=s.find("#fn_"+i),u=s.find("#fa_"+i),p=s.find("#fs_"+i),f=s.find("#fx_"+i),h=s.find("#fm_"+i),g=s.find("#fc_"+i),m=s.find(".custom-file-label"),w=m.html(),v=function(e){!o&&c.val()&&(confirm(ew.language.phrase("UploadOverwrite"))||(e.preventDefault(),e.stopPropagation()))},b=e.templates("#template-download"),y=e.templates("#template-upload"),E=Qt(t),_=e(E);(l="confirm"==_.find("#confirm").val())&&_.find("span.fileinput-button").hide();var S=parseInt(g.val(),10),x=Yt(ew.API_JQUERY_UPLOAD_ACTION),T={id:n,table:r,session:ew.SESSION_ID,replace:o?"0":"1",exts:f.val(),maxsize:h.val(),maxfilecount:g.val()};a.fileupload({url:x,type:"POST",multipart:!0,autoUpload:!0,loadImageFileTypes:/^image\/(gif|jpe?g|png)$/i,loadVideoFileTypes:/^video\/mp4$/i,loadAudioFileTypes:/^audio\/(mpeg|mp3)$/i,acceptFileTypes:f.val()?new RegExp("\\.("+f.val().replace(/,/g,"|")+")$","i"):null,maxFileSize:parseInt(h.val(),10),maxNumberOfFiles:S>1?S:null,filesContainer:d,formData:T,uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:y.render.bind(y),downloadTemplate:b.render.bind(b),previewMaxWidth:ew.UPLOAD_THUMBNAIL_WIDTH,previewMaxHeight:ew.UPLOAD_THUMBNAIL_HEIGHT,dropZone:s,pasteZone:s,messages:{acceptFileTypes:ew.language.phrase("UploadErrMsgAcceptFileTypes"),maxFileSize:ew.language.phrase("UploadErrMsgMaxFileSize"),maxNumberOfFiles:ew.language.phrase("UploadErrMsgMaxNumberOfFiles"),minFileSize:ew.language.phrase("UploadErrMsgMinFileSize")},readOnly:l}).on("fileuploaddone",(function(e,t){if(!t.result.files[0].error){var a=t.result.files[0].name,n=o&&c.val()?c.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR):[];n.push(a),c.val(n.join(ew.MULTIPLE_UPLOAD_SEPARATOR)),u.val("0"),o||d.find("tr:not(:last)").remove()}})).on("fileuploaddestroy",(function(t,a){var n=e(t.originalEvent.target).data("url"),i=new URLSearchParams(n.split("?")[1]),r=i.get("id"),o=i.get(r);if(o){var s=c.val()?c.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR):[],l=s.indexOf(o);l>-1&&s.splice(l,1),c.val(s.join(ew.MULTIPLE_UPLOAD_SEPARATOR)),u.val("0")}})).on("fileuploadchange",(function(t,a){for(var n=c.val()?c.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR):[],i=0;i<a.files.length;i++)n.push(a.files[i].name);var r=parseInt(g.val(),10);if(e.isNumber(r)&&r>0&&n.length>r)return la(ew.language.phrase("UploadErrMsgMaxNumberOfFiles")),!1;var o=parseInt(p.val(),10);return e.isNumber(o)&&o>0&&n.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length>o?(la(ew.language.phrase("UploadErrMsgMaxFileLength")),!1):void 0})).on("fileuploadadded fileuploadfinished fileuploaddestroyed",(function(){d.css("margin-top",d.find("tr")[0]&&!l?"10px":"0");var e=c.val()?c.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR):[];m.html(e.join(", ")||w)})).on("fileuploadprocessfail",(function(e,t){t.files&&t.files.error&&la(t.files[0].error)})).on("fileuploadadded",(function(e,t){t.context.find(".start").click(v)})).on("fileuploadcompleted",(function(e,t){Wt(e={target:t.context}),Vt(e)})).click((function(){a.closest("span.fileinput-button").tooltip("hide")})),c.val()&&e.ajax({url:x,data:{id:n,table:r,session:ew.SESSION_ID},dataType:"json",context:this,success:function(i){if(i&&i[n]){var r=a.fileupload("option","done");r&&r.call(t,e.Event(),{result:{files:i[n]}})}l&&d.find("td.delete").hide()}})}},parseNumber:function(t,a){if(e.isString(t)){var n,i=[],r=(a=a||{thousandsSeparator:ew.THOUSANDS_SEP,decimalSeparator:ew.DECIMAL_POINT}).thousandsSeparator,o=a.decimalSeparator;r&&i.push(nn(r)+"(?=\\d)"),n=new RegExp("(?:"+i.join("|")+")","g"),"."===o&&(o=null),t=t.replace(n,""),t=o?t.replace(o,"."):t}return e.isString(t)&&""!==t.trim()&&(t=+t),e.isNumber&&isFinite(t)||(t=null),t},formatNumber:function(t,a){if(e.isNumber(t)){var n,i,r,o,s=t<0,l=t+"",d=(a=a||{thousandsSeparator:ew.THOUSANDS_SEP,decimalSeparator:ew.DECIMAL_POINT}).decimalPlaces,c=a.decimalSeparator||".",u=a.thousandsSeparator;if(e.isNumber(d)&&d>=0&&d<=20&&(l=t.toFixed(d)),"."!==c&&(l=l.replace(".",c)),u){for(n=(n=l.lastIndexOf(c))>-1?n:l.length,i=l.substring(n),r=0,o=n;o>0;o--)r%3==0&&o!==n&&(!s||o>1)&&(i=u+i),i=l.charAt(o-1)+i,r++;l=i}return l}return e.isValue(t)&&t.toString?t.toString():""},parseDate:function(t,a){var n=e.makeArray(arguments);if(e.isNumber(a)&&a>=0&&a<=17){var i,r=ew.DATE_FORMAT.toUpperCase(),o=ew.DATE_SEPARATOR,s=ew.TIME_SEPARATOR;switch(a){case 0:case 1:case 2:case 8:i=r+" HH"+s+"mm"+s+"ss";break;case 3:i="hh:mm:ss A";break;case 4:i="HH:mm:ss";break;case 5:i="YYYY"+o+"MM"+o+"DD";break;case 6:i="MM"+o+"DD"+o+"YYYY";break;case 7:i="DD"+o+"MM"+o+"YYYY";break;case 9:i="YYYY"+o+"MM"+o+"DD HH"+s+"mm"+s+"ss";break;case 10:i="MM"+o+"DD"+o+"YYYY HH"+s+"mm"+s+"ss";break;case 11:i="DD"+o+"MM"+o+"YYYY HH"+s+"mm"+s+"ss";break;case 12:i="YY"+o+"MM"+o+"DD";break;case 13:i="MM"+o+"DD"+o+"YY";break;case 14:i="DD"+o+"MM"+o+"YY";break;case 15:i="YY"+o+"MM"+o+"DD HH"+s+"mm"+s+"ss";break;case 16:i="MM"+o+"DD"+o+"YY HH"+s+"mm"+s+"ss";break;case 17:i="DD"+o+"MM"+o+"YY HH"+s+"mm"+s+"ss"}n[1]=[i,"YYYY-MM-DD HH"+s+"mm"+s+"ss"]}return moment.apply(this,n)},formatDate:function(e,t){return moment(e).format(t||ew.DATE_FORMAT.toUpperCase())},initPage:function(t){var a=t&&t.target?t.target:document,n=e(a),i=n.find("table.ew-table:not(.ew-export-table)");Array.prototype.forEach.call(a.querySelectorAll(".ew-grid-upper-panel, .ew-grid-lower-panel"),ew.initGridPanel),ew.renderJsTemplates(t),function(t){var a=t&&t.target?t.target:document,n=e(a);for(var i in Lt)n.find("#"+i)&&Mt[i].init()}(t),qt(t),Ht(t),Ut(t),Wt(t),Vt(t),n.find("[data-widget='treeview']").each((function(){adminlte.Treeview._jQueryInterface.call(e(this),"init")})),i.each(wa),n.find(".ew-btn-dropdown").on("shown.bs.dropdown",(function(){var t=e(this).removeClass("dropup"),a=e(window),n=t.find("> .dropdown-menu");t.toggleClass("dropup",n.offset().top+n.height()>a.scrollTop()+a.height())})),n.find("input[name=pageno]").keypress((function(e){if(13==e.which)return Dt.searchParams.append(this.name,parseInt(this.value)),window.location=Dt.toString(),!1})),ew.IS_SCREEN_SM_MIN||n.find("."+ew.RESPONSIVE_TABLE_CLASS+" [data-toggle='dropdown']").parent().on("shown.bs.dropdown",(function(){var t=e(this),a=t.find(".dropdown-menu"),n=t.closest("."+ew.RESPONSIVE_TABLE_CLASS)[0];if(n.scrollHeight-n.clientHeight){var i=a.offset().top+a.outerHeight()-e(n).offset().top-n.clientHeight;i>0&&a.css(ew.CSS_FLIP?"right":"left","100%").css("top",parseFloat(a.css("top"))-i)}})),Gt(t),Bt(t),Kt(t);var r=n.find(".ew-report");r[0]&&(r.find(".card").on("collapsed.lte.widget",(function(){var t=e(this).closest("[class^='col-']"),a=t.css("min-height");a&&t.data("min-height",a),t.css("min-height",0)})).on("expanded.lte.widget",(function(){var t=e(this).closest("[class^='col-']"),a=t.css("min-height");a&&t.css("min-height",a)})),r.find("span.ew-group-toggle").on("click",(function(){ew.toggleGroup(this)}))),"undefined"!=typeof ew.USE_JAVASCRIPT_MESSAGE&&ew.USE_JAVASCRIPT_MESSAGE&&dn(t)},redirect:function(t,a,n){var i=t.split("?"),r=new URLSearchParams(i[1]);if(r.set(ew.TOKEN_NAME_KEY,ew.TOKEN_NAME),r.set(ew.ANTIFORGERY_TOKEN_KEY,ew.ANTIFORGERY_TOKEN),_a(n,"post")){var o=a?e(a):e("<form></form>").appendTo("body");o.attr({action:i[0],method:"post"}),r.forEach((function(t,a){e('<input type="hidden">').attr({name:a,value:sanitize(t)}).appendTo(o)})),o.submit()}else{var s=r.toString();window.location=i[0]+(s?"?"+s:"")}},togglePassword:function(t){var a=e(t.currentTarget),n=a.closest(".input-group").find("input"),i=a.find("i");"text"==n.attr("type")?(n.attr("type","password"),i.toggleClass("fa-eye-slash fa-eye")):"password"==n.attr("type")&&(n.attr("type","text"),i.toggleClass("fa-eye-slash fa-eye"))},exportWithCharts:function(t,a,n,i){var r=t.target;n+="_"+Date.now(),a+=(a.split("?").length>1?"&":"?")+"exportid="+n;var o=za(),s=o.substring(0,o.lastIndexOf("/")+1);a=s+a;var l=e(r),d=i?"post":"get";l.is(".dropdown-menu a")&&(l=l.closest(".btn-group"));var c=function(){var t=a.replace(/&amp;/g,"&"),n=new URL(t),r=n.searchParams,o="1"==r.get("custom");if(i&&!o){var s=e(i).serialize();e.post(t,s,(function(e){ew.showMessage(e)}))}else{var l=r.get("export");o&&["word","excel","pdf","email"].includes(l)?("email"==l&&(r.delete("export"),t=n.toString()+"&"+e(i).serialize()),e("iframe.ew-export").remove(),e("<iframe></iframe>").addClass("ew-export d-none").attr("src",t).appendTo(Nt.css("cursor","wait")),setTimeout((function(){Nt.css("cursor","default")}),5e3)):"print"==l?ew.redirect(t,i,d):ew.fileDownload(t,null)}return!1},u=Object.keys(window.exportCharts);if(0==u.length)return c();Nt.css("cursor","wait");for(var p=[],f=0;f<u.length;f++){var h=u[f],g=window.exportCharts[h],m="exportfilename="+n+"_"+h+".png|exportformat=png|exportaction=download|exportparameters=undefined";g&&g.toBase64Image&&p.push({chart_engine:"Chart.js",stream_type:"base64",stream:g.toBase64Image(),parameters:m})}return e.ajax({url:Yt(ew.API_EXPORT_CHART_ACTION),data:{charts:JSON.stringify(p)},cache:!1,type:"POST"}).done((function(t){e.isString(t)&&(t=Xt(t)),t.success?c():ew.alert(t.error)})).fail((function(e,t,a){ew.alert(a+": "+e.responseText)})).always((function(){e("#ew-message-box").find(".modal-footer button").prop("disabled",!1),Nt.css("cursor","default")})),!1},fixLayoutHeight:function(){jt&&jt.cancel(),jt=e.later(50,null,(function(){var e=Nt.data("lte.layout");e&&e.fixLayoutHeight()}))}}),pn=function(e){var t,a;function n(t,a){return e.call(this,t,a)||this}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.prototype.test=function(){return""},n}(kt);ew.IS_SCREEN_SM_MIN=window.matchMedia("(min-width: 768px)").matches,ew.MOBILE_DETECT=new MobileDetect(window.navigator.userAgent),ew.IS_MOBILE=!!ew.MOBILE_DETECT.mobile(),ew.IS_IE=ew.MOBILE_DETECT.version("MSIE")>0,ew.SHOW_EXPORT_DIALOG=!ew.IS_IE,window.exportCharts={},window.drillDownCharts={},ew.addSpinner(),Object.assign(ew,{MultiPage:function(t){var a=this;this.$form=null,this.formID=t,this.pageIndex=1,this.maxPageIndex=0,this.minPageIndex=0,this.pageIndexes=[],this.$pages=null,this.$collapses=null,this.isTab=!1,this.isCollapse=!1,this.lastPageSubmit=!1,this.hideDisabledButton=!1,this.hideInactivePages=!1,this.lockTabs=!1,this.hideTabs=!1,this.showPagerTop=!1,this.showPagerBottom=!1,this.pagerTemplate='<nav><ul class="pagination"><li class="page-item previous ew-prev"><a href="#" class="page-link"><span class="icon-prev"></span> {Prev}</a></li><li class="page-item next ew-next"><a href="#" class="page-link">{Next} <span class="icon-next"></span></a></li></ul></nav>';var n=function(e){e.preventDefault()},i=["lastPageSubmit","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate"];this.set=function(){if(1==arguments.length&&e.isObject(arguments[0])){var t=arguments[0];for(var a in t){var n=a[0].toLowerCase()+a.substr(1);i.includes(n)&&(this[n]=t[a])}}},this.init=function(){var e=this.pagerTemplate.replace(/\{prev\}/i,ew.language.phrase("Prev")).replace(/\{next\}/i,ew.language.phrase("Next"));this.isTab?(this.showPagerTop&&this.$pages.closest(".tabbable, .ew-nav-tabs").before(e),this.showPagerBottom&&this.$pages.closest(".tabbable, .ew-nav-tabs").after(e),this.$form.find(".ew-prev").click((function(e){return a.$pages.off("show.bs.tab",n).filter(".active").parent().prev(":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))").find("[data-toggle=tab]").toggleClass("disabled d-none",!1).click(),!1})),this.$form.find(".ew-next").click((function(e){return a.$pages.off("show.bs.tab",n).filter(".active").parent().next(":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))").find("[data-toggle=tab]").toggleClass("disabled d-none",!1).click(),!1})),this.hideTabs&&this.$form.find(".ew-multi-page > .tabbable > .nav-tabs, .ew-multi-page > .ew-nav-tabs > .nav-tabs").hide()):this.isCollapse&&(this.showPagerTop&&this.$collapses.closest(".ew-accordion").before(e),this.showPagerBottom&&this.$collapses.closest(".ew-accordion").after(e),this.$form.find(".ew-prev").click((function(e){return a.$pages.closest(".card").filter(":has(.collapse.show)").prev(":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))").toggleClass("disabled d-none",!1).find("[data-toggle=collapse]").click(),!1})),this.$form.find(".ew-next").click((function(e){return a.$pages.closest(".card").filter(":has(.collapse.show)").next(":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))").toggleClass("disabled d-none",!1).find("[data-toggle=collapse]").click(),!1}))),this.pageShow()},this.pageShow=function(){this.isTab?(this.lockTabs&&this.$pages.on("show.bs.tab",n),this.$pages.each((function(){var t=e(this);a.hideInactivePages&&t.toggleClass("d-none",!t.hasClass("active")),a.lockTabs&&t.toggleClass("disabled",!t.hasClass("active"))}))):this.isCollapse&&this.$pages.closest(".card").each((function(){var t=e(this);a.hideInactivePages&&t.toggleClass("d-none",!t.find(".collapse.show")[0])}));var t=this.lastPageSubmit&&this.pageIndex!=this.maxPageIndex,i=this.$form.closest(".content, .modal-content").find("#btn-action, button.ew-submit").prop("disabled",t).toggle(!this.hideDisabledButton||!t);e(".ew-captcha").toggle(i.is(":visible:not(:disabled)")),t=this.pageIndex<=this.minPageIndex,this.$form.find(".ew-prev").toggleClass("disabled",t),t=this.pageIndex>=this.maxPageIndex,this.$form.find(".ew-next").toggleClass("disabled",t)},this.gotoPage=function(e){if(!(e<=0||e<this.minPageIndex||e>this.maxPageIndex)&&this.pageIndex!=e){var t=this.$pages.eq(e-1);if(this.isTab)t.is(":not(.d-none):not(.disabled)")?t.click():t.parent().next(":has([data-toggle=tab]):not(.d-none):not(.disabled)").find("[data-toggle=tab]").toggleClass("disabled",!1).click();else if(this.isCollapse){var a=t.closest(".card");a.is(":not(.d-none)")?t.click():a.next(":has([data-toggle=collapse]):not(.d-none)").find("[data-toggle=collapse]").click()}this.pageIndex=e}},this.gotoPageByIndex=this.gotoPage,this.gotoPageByElement=function(t){this.gotoPage(parseInt(e(t).data("page"),10)||-1)},this.gotoPageByElementId=function(e){var t=this.$form.find("[data-page]").filter("[id='"+e+"'],[name='"+e+"'],[data-field='"+e+"']");this.gotoPageByElement(t)},this.togglePage=function(e,t){this.isTab?this.$pages.eq(e-1).toggleClass("d-none",!t):this.isCollapse&&this.$pages.eq(e-1).closest(".card").toggle("d-none",!t)},this.render=function(){this.$form=e("#"+t),this.pageIndexes=this.$form.find("[data-page]").map((function(){var t=parseInt(e(this).data("page"),10);return t>0?t:null})).get(),this.pageIndexes.sort((function(e,t){return e-t})),this.minPageIndex=this.pageIndexes[0],this.maxPageIndex=this.pageIndexes[this.pageIndexes.length-1];var n=this.$form.find("[data-toggle=tab]");if(n[0])this.$pages=n,this.isTab=!0,n.on("shown.bs.tab",(function(t){a.pageIndex=n.index(t.target)+1,a.pageShow(),e(e(this).attr("href")).find(".ew-google-map").each((function(){var e=ew.googleMaps[this.id];e&&e.map&&(google.maps.event.trigger(e.map,"resize"),e.map.setCenter(e.latlng))}))})),this.pageIndex=n.index(n.parent(".active"))+1;else if(this.$collapses=this.$form.find("[data-toggle=collapse]"),this.$collapses[0]){this.$pages=this.$collapses,this.isCollapse=!0;var i=this.$collapses.closest(".card-header").next();i.on("shown.bs.collapse",(function(t){a.pageIndex=i.index(t.target)+1,a.pageShow(),e(this).find(".ew-google-map").each((function(){var e=ew.googleMaps[this.id];e&&e.map&&(google.maps.event.trigger(e.map,"resize"),e.map.setCenter(e.latlng))}))})),this.pageIndex=i.index(i.hasClass("show"))+1}e((function(){a.init()}))}},HttpForm:pn},un);var fn=e(document);loadjs.ready("load",(function(){e.views.settings.debugMode(ew.DEBUG),ew.setSessionTimer(),ew.initPage(),e("#ew-modal-dialog").on("load.ew",ew.initPage),e("#ew-add-opt-dialog").on("load.ew",ew.initPage);var t=ew.currentUrl.searchParams.get("hash");t&&e("html, body").animate({scrollTop:e("#"+t).offset().top},800),ew.removeSpinner(),fn.trigger("load")})),fn.on("addoption",(function(t,a){for(var n=a.data,i=a.parents,r=0,o=i.length;r<o;r++){var s=i[r];if(!s.length)return a.valid=!1;var l=n["ff"+(r>0?r+1:"")];if(!e.isUndefined(l)&&!s.includes(String(l)))return a.valid=!1}})),fn.on("show.bs.modal",".modal",(function(){var t=1040+e(".modal:visible").length;e(this).css("z-index",t),setTimeout((function(){e(".modal-backdrop").not(".modal-stack").css("z-index",t-1).addClass("modal-stack")}),0)})),fn.on("hidden.bs.modal",".modal",(function(){e(".modal:visible").length&&e("body").addClass("modal-open")})),e.extend({isBoolean:function(e){return"boolean"==typeof e},isNull:function(e){return null===e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isObject:function(e){return e&&("object"==typeof e||this.isFunction(e))||!1},isString:function(e){return"string"==typeof e},isUndefined:function(e){return"undefined"==typeof e},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isDate:function(e){return"date"===this.type(e)&&"Invalid Date"!==e.toString()&&!isNaN(e)},later:function(e,t,a,n,i){e=e||0,t=t||{};var r,o,s=a,l=n;if(this.isString(a)&&(s=t[a]),s)return this.isUndefined(n)||this.isArray(l)||(l=[n]),r=function(){s.apply(t,l||[])},o=i?setInterval(r,e):setTimeout(r,e),{interval:i,cancel:function(){this.interval?clearInterval(o):clearTimeout(o)}}}}),e.fn.fields=function(t){var a,n,i,r={},o=this.attr("id"),s=this[0],l=o.match(/^[xy](\d*)_/);l?(a=ew.getForm(s),n=this.data("table"),i=l[1]):s&&s._form&&(a=s.$element,n=s.id.replace(new RegExp("^f|"+s.pageId+"$","g"),""),i=e(s._form).data("rowindex"));var d="[data-table="+n+"][data-field"+(t?"=x_"+t:"")+"]";return e.isValue(i)&&(d+="[name^=x"+i+"_]"),a&&d&&e(a).find(d).each((function(){var t=this.getAttribute("data-field").substr(2),a=this.getAttribute("name");t=/^y_/.test(a)?"y_"+t:t,r[t]=r[t]?r[t].add(this):e(this)})),t?r[t]:r},e.fn.extend({row:function(){var e=this.closest("#r_"+this.data("field").substr(2));return e[0]||(e=this.closest(".ew-table > tbody > tr")),e},visible:function(e){var t=this.closest("#r_"+this.data("field").substr(2));return t[0]||(t=this.closest("[id^=el]")),"undefined"!=typeof e?(t.toggle(e),this):t.is(":visible")},readonly:function(e){return"undefined"!=typeof e?(this.prop("readOnly",e),this):this.prop("readOnly")},disabled:function(e){return"undefined"!=typeof e?(this.prop("disabled",e),this):this.prop("disabled")},value:function(t){var a=this.attr("type");if("undefined"!=typeof t){e.isArray(t)||(t=[t]);var n="radio"==(a=this.attr("type"))||"checkbox"==a?this.get():this[0];return ew.isHiddenTextArea(this)?this.val(t).data("editor").save():ew.selectOption(n,t),this}return"checkbox"==a?ew.getOptionValues(this.get()):"radio"==a?ew.getOptionValues(this.get()).join():ew.isHiddenTextArea(this)?(this.data("editor").save(),this.val()):this.val()},toNumber:function(){return ew.parseNumber(this.value())},toDate:function(){return ew.parseDate(this.value(),this.data("format"))},toJsDate:function(){return ew.parseDate(this.value(),this.data("format")).toDate()}}),e(window).off("load.lte.treeview");var hn=adminlte.Treeview;hn.prototype._toggle=hn.prototype.toggle,hn.prototype.toggle=function(t){var a=e(t.currentTarget),n=a.next(),i=a.attr("href"),r=e(t.target).closest(".menu-item-text");!n.is(".nav-treeview")||r[0]&&i&&"#"!=i&&"javascript:void(0);"!=i||this._toggle(t)},e("ul.dropdown-menu [data-toggle=dropdown]").on("click",(function(t){var a=e(this).attr("href");a&&"#"!=a&&"SPAN"==t.target.nodeName&&(window.location=a)}))}(jQuery);
//# sourceMappingURL=ew.min.js.map